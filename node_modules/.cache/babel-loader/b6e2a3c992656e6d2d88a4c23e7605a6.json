{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\", \"trigger\", \"onVisibleChange\", \"modalProps\", \"onFinish\", \"title\", \"width\"];\nimport React, { useContext, useState, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport omit from 'omit.js';\nimport { createPortal } from 'react-dom';\nimport BaseForm from '../../BaseForm';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport ScrollLocker from \"rc-util/es/Dom/scrollLocker\";\n\nfunction ModalForm(_ref) {\n  var _context$locale, _context$locale$Modal, _context$locale2, _context$locale2$Moda, _rest$submitter, _rest$submitter2, _rest$submitter3;\n\n  var children = _ref.children,\n      trigger = _ref.trigger,\n      onVisibleChange = _ref.onVisibleChange,\n      modalProps = _ref.modalProps,\n      onFinish = _ref.onFinish,\n      title = _ref.title,\n      width = _ref.width,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var domRef = useRef(null);\n\n  var _useMergedState = useMergedState(!!rest.visible, {\n    value: rest.visible,\n    onChange: onVisibleChange\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(0),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      key = _useMergedState4[0],\n      setKey = _useMergedState4[1];\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var renderDom = useMemo(function () {\n    var _context$getPopupCont;\n\n    if (modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) {\n      if (typeof (modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) === 'function') {\n        var _modalProps$getContai;\n\n        return modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$getContai = modalProps.getContainer) === null || _modalProps$getContai === void 0 ? void 0 : _modalProps$getContai.call(modalProps);\n      }\n\n      if (typeof (modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) === 'string') {\n        return document.getElementById(modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer);\n      }\n\n      return modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer;\n    }\n\n    if ((modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) === false) {\n      return false;\n    }\n\n    return context === null || context === void 0 ? void 0 : (_context$getPopupCont = context.getPopupContainer) === null || _context$getPopupCont === void 0 ? void 0 : _context$getPopupCont.call(context, document.body); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [context, modalProps, visible]);\n\n  var _useState = useState(function () {\n    if (typeof window === 'undefined') return undefined;\n    return new ScrollLocker({\n      container: renderDom || document.body\n    });\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      scrollLocker = _useState2[0];\n\n  noteOnce( // eslint-disable-next-line @typescript-eslint/dot-notation\n  !rest['footer'] || !(modalProps === null || modalProps === void 0 ? void 0 : modalProps.footer), 'ModalForm 是一个 ProForm 的特殊布局，如果想自定义按钮，请使用 submit.render 自定义。');\n  useEffect(function () {\n    if (visible) {\n      var _scrollLocker$lock;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$lock = scrollLocker.lock) === null || _scrollLocker$lock === void 0 ? void 0 : _scrollLocker$lock.call(scrollLocker);\n    } else {\n      var _scrollLocker$unLock;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock = scrollLocker.unLock) === null || _scrollLocker$unLock === void 0 ? void 0 : _scrollLocker$unLock.call(scrollLocker);\n    }\n\n    if (visible && rest.visible) {\n      onVisibleChange === null || onVisibleChange === void 0 ? void 0 : onVisibleChange(true);\n    } // 如果打开了窗口，并且是用户设置的 visible，就触发一下重新更新\n\n\n    if (visible && rest.visible && (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose)) {\n      setKey(key + 1);\n    }\n\n    return function () {\n      var _scrollLocker$unLock2;\n\n      if (!visible) scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock2 = scrollLocker.unLock) === null || _scrollLocker$unLock2 === void 0 ? void 0 : _scrollLocker$unLock2.call(scrollLocker);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visible]);\n  useEffect(function () {\n    return function () {\n      var _scrollLocker$unLock3;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock3 = scrollLocker.unLock) === null || _scrollLocker$unLock3 === void 0 ? void 0 : _scrollLocker$unLock3.call(scrollLocker);\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  /** 设置 trigger 的情况下，懒渲染优化性能；使之可以直接配合表格操作等场景使用 */\n\n  var isFirstRender = useRef(!(modalProps === null || modalProps === void 0 ? void 0 : modalProps.forceRender));\n  /**\n   * IsFirstRender.current 或者 visible 为 true 的时候就渲染 不渲染能会造成一些问题, 比如再次打开值不对了 只有手动配置\n   * drawerProps?.destroyOnClose 为 true 的时候才会每次关闭的时候删除 dom\n   */\n\n  var shouldRenderFormItems = useMemo(function () {\n    if (isFirstRender.current && visible === false) {\n      return false;\n    }\n\n    if (visible === false && (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose)) {\n      return false;\n    }\n\n    return true;\n  }, [visible, modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose]);\n  /** 同步 props 和 本地的 ref */\n\n  var formRef = useRef();\n  /** 如果 destroyOnClose ，重置一下表单 */\n\n  useEffect(function () {\n    if (visible) {\n      isFirstRender.current = false;\n    }\n  }, [modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose, visible]);\n  useImperativeHandle(rest.formRef, function () {\n    return formRef.current;\n  });\n  var renderSubmitter = rest.submitter === false ? false : _objectSpread(_objectSpread({}, rest.submitter), {}, {\n    searchConfig: _objectSpread({\n      submitText: (modalProps === null || modalProps === void 0 ? void 0 : modalProps.okText) || ((_context$locale = context.locale) === null || _context$locale === void 0 ? void 0 : (_context$locale$Modal = _context$locale.Modal) === null || _context$locale$Modal === void 0 ? void 0 : _context$locale$Modal.okText) || '确认',\n      resetText: (modalProps === null || modalProps === void 0 ? void 0 : modalProps.cancelText) || ((_context$locale2 = context.locale) === null || _context$locale2 === void 0 ? void 0 : (_context$locale2$Moda = _context$locale2.Modal) === null || _context$locale2$Moda === void 0 ? void 0 : _context$locale2$Moda.cancelText) || '取消'\n    }, (_rest$submitter = rest.submitter) === null || _rest$submitter === void 0 ? void 0 : _rest$submitter.searchConfig),\n    submitButtonProps: _objectSpread({\n      type: (modalProps === null || modalProps === void 0 ? void 0 : modalProps.okType) || 'primary'\n    }, (_rest$submitter2 = rest.submitter) === null || _rest$submitter2 === void 0 ? void 0 : _rest$submitter2.submitButtonProps),\n    resetButtonProps: _objectSpread({\n      preventDefault: true,\n      onClick: function onClick(e) {\n        var _modalProps$onCancel;\n\n        modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$onCancel = modalProps.onCancel) === null || _modalProps$onCancel === void 0 ? void 0 : _modalProps$onCancel.call(modalProps, e);\n        setVisible(false);\n      }\n    }, (_rest$submitter3 = rest.submitter) === null || _rest$submitter3 === void 0 ? void 0 : _rest$submitter3.resetButtonProps)\n  });\n  var formDom = /*#__PURE__*/React.createElement(\"div\", {\n    ref: domRef,\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    }\n  }, /*#__PURE__*/React.createElement(BaseForm, _extends({\n    key: key,\n    formComponentType: \"ModalForm\",\n    layout: \"vertical\"\n  }, omit(rest, ['visible']), {\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (onFinish) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.next = 4;\n                return onFinish(values);\n\n              case 4:\n                success = _context.sent;\n\n                if (success) {\n                  setVisible(false);\n                  setTimeout(function () {\n                    var _formRef$current;\n\n                    if (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose) (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n                  }, 300);\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    submitter: renderSubmitter,\n    contentRender: function contentRender(item, submitter) {\n      return /*#__PURE__*/React.createElement(_Modal, _extends({\n        title: title,\n        width: width || 800\n      }, modalProps, {\n        afterClose: function afterClose() {\n          var _modalProps$afterClos;\n\n          modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$afterClos = modalProps.afterClose) === null || _modalProps$afterClos === void 0 ? void 0 : _modalProps$afterClos.call(modalProps);\n        },\n        getContainer: false,\n        visible: visible,\n        onCancel: function onCancel(e) {\n          var _modalProps$onCancel2;\n\n          setVisible(false);\n          modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$onCancel2 = modalProps.onCancel) === null || _modalProps$onCancel2 === void 0 ? void 0 : _modalProps$onCancel2.call(modalProps, e);\n        },\n        footer: submitter === undefined ? null : submitter\n      }), shouldRenderFormItems ? item : null);\n    }\n  }), children));\n  /** 这个是为了支持 ssr */\n\n  var portalRenderDom = useMemo(function () {\n    if (typeof window === 'undefined') return undefined;\n    return renderDom || document.body;\n  }, [renderDom]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, renderDom !== false && portalRenderDom ? /*#__PURE__*/createPortal(formDom, portalRenderDom) : formDom, trigger && /*#__PURE__*/React.cloneElement(trigger, _objectSpread(_objectSpread({}, trigger.props), {}, {\n    onClick: function () {\n      var _onClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n        var _trigger$props, _trigger$props$onClic;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!visible && (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return setKey(key + 1);\n\n              case 3:\n                setVisible(!visible);\n                (_trigger$props = trigger.props) === null || _trigger$props === void 0 ? void 0 : (_trigger$props$onClic = _trigger$props.onClick) === null || _trigger$props$onClic === void 0 ? void 0 : _trigger$props$onClic.call(_trigger$props, e);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function onClick(_x2) {\n        return _onClick.apply(this, arguments);\n      }\n\n      return onClick;\n    }()\n  })));\n}\n\nexport default ModalForm;","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/layouts/ModalForm/index.js"],"names":["_Modal","_extends","_regeneratorRuntime","_asyncToGenerator","_objectSpread","_ConfigProvider","_slicedToArray","_objectWithoutProperties","_excluded","React","useContext","useState","useEffect","useImperativeHandle","useMemo","useRef","useMergedState","omit","createPortal","BaseForm","noteOnce","ScrollLocker","ModalForm","_ref","_context$locale","_context$locale$Modal","_context$locale2","_context$locale2$Moda","_rest$submitter","_rest$submitter2","_rest$submitter3","children","trigger","onVisibleChange","modalProps","onFinish","title","width","rest","domRef","_useMergedState","visible","value","onChange","_useMergedState2","setVisible","_useMergedState3","_useMergedState4","key","setKey","context","ConfigContext","renderDom","_context$getPopupCont","getContainer","_modalProps$getContai","call","document","getElementById","getPopupContainer","body","_useState","window","undefined","container","_useState2","scrollLocker","footer","_scrollLocker$lock","lock","_scrollLocker$unLock","unLock","destroyOnClose","_scrollLocker$unLock2","_scrollLocker$unLock3","isFirstRender","forceRender","shouldRenderFormItems","current","formRef","renderSubmitter","submitter","searchConfig","submitText","okText","locale","Modal","resetText","cancelText","submitButtonProps","type","okType","resetButtonProps","preventDefault","onClick","e","_modalProps$onCancel","onCancel","formDom","createElement","ref","stopPropagation","formComponentType","layout","_ref2","mark","_callee","values","success","wrap","_callee$","_context","prev","next","abrupt","sent","setTimeout","_formRef$current","resetFields","stop","_x","apply","arguments","contentRender","item","afterClose","_modalProps$afterClos","_modalProps$onCancel2","portalRenderDom","Fragment","cloneElement","props","_onClick","_callee2","_trigger$props","_trigger$props$onClic","_callee2$","_context2","_x2"],"mappings":"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","sourcesContent":["import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\", \"trigger\", \"onVisibleChange\", \"modalProps\", \"onFinish\", \"title\", \"width\"];\nimport React, { useContext, useState, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport omit from 'omit.js';\nimport { createPortal } from 'react-dom';\nimport BaseForm from '../../BaseForm';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport ScrollLocker from \"rc-util/es/Dom/scrollLocker\";\n\nfunction ModalForm(_ref) {\n  var _context$locale, _context$locale$Modal, _context$locale2, _context$locale2$Moda, _rest$submitter, _rest$submitter2, _rest$submitter3;\n\n  var children = _ref.children,\n      trigger = _ref.trigger,\n      onVisibleChange = _ref.onVisibleChange,\n      modalProps = _ref.modalProps,\n      onFinish = _ref.onFinish,\n      title = _ref.title,\n      width = _ref.width,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var domRef = useRef(null);\n\n  var _useMergedState = useMergedState(!!rest.visible, {\n    value: rest.visible,\n    onChange: onVisibleChange\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(0),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      key = _useMergedState4[0],\n      setKey = _useMergedState4[1];\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var renderDom = useMemo(function () {\n    var _context$getPopupCont;\n\n    if (modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) {\n      if (typeof (modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) === 'function') {\n        var _modalProps$getContai;\n\n        return modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$getContai = modalProps.getContainer) === null || _modalProps$getContai === void 0 ? void 0 : _modalProps$getContai.call(modalProps);\n      }\n\n      if (typeof (modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) === 'string') {\n        return document.getElementById(modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer);\n      }\n\n      return modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer;\n    }\n\n    if ((modalProps === null || modalProps === void 0 ? void 0 : modalProps.getContainer) === false) {\n      return false;\n    }\n\n    return context === null || context === void 0 ? void 0 : (_context$getPopupCont = context.getPopupContainer) === null || _context$getPopupCont === void 0 ? void 0 : _context$getPopupCont.call(context, document.body); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [context, modalProps, visible]);\n\n  var _useState = useState(function () {\n    if (typeof window === 'undefined') return undefined;\n    return new ScrollLocker({\n      container: renderDom || document.body\n    });\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      scrollLocker = _useState2[0];\n\n  noteOnce( // eslint-disable-next-line @typescript-eslint/dot-notation\n  !rest['footer'] || !(modalProps === null || modalProps === void 0 ? void 0 : modalProps.footer), 'ModalForm 是一个 ProForm 的特殊布局，如果想自定义按钮，请使用 submit.render 自定义。');\n  useEffect(function () {\n    if (visible) {\n      var _scrollLocker$lock;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$lock = scrollLocker.lock) === null || _scrollLocker$lock === void 0 ? void 0 : _scrollLocker$lock.call(scrollLocker);\n    } else {\n      var _scrollLocker$unLock;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock = scrollLocker.unLock) === null || _scrollLocker$unLock === void 0 ? void 0 : _scrollLocker$unLock.call(scrollLocker);\n    }\n\n    if (visible && rest.visible) {\n      onVisibleChange === null || onVisibleChange === void 0 ? void 0 : onVisibleChange(true);\n    } // 如果打开了窗口，并且是用户设置的 visible，就触发一下重新更新\n\n\n    if (visible && rest.visible && (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose)) {\n      setKey(key + 1);\n    }\n\n    return function () {\n      var _scrollLocker$unLock2;\n\n      if (!visible) scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock2 = scrollLocker.unLock) === null || _scrollLocker$unLock2 === void 0 ? void 0 : _scrollLocker$unLock2.call(scrollLocker);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visible]);\n  useEffect(function () {\n    return function () {\n      var _scrollLocker$unLock3;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock3 = scrollLocker.unLock) === null || _scrollLocker$unLock3 === void 0 ? void 0 : _scrollLocker$unLock3.call(scrollLocker);\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  /** 设置 trigger 的情况下，懒渲染优化性能；使之可以直接配合表格操作等场景使用 */\n\n  var isFirstRender = useRef(!(modalProps === null || modalProps === void 0 ? void 0 : modalProps.forceRender));\n  /**\n   * IsFirstRender.current 或者 visible 为 true 的时候就渲染 不渲染能会造成一些问题, 比如再次打开值不对了 只有手动配置\n   * drawerProps?.destroyOnClose 为 true 的时候才会每次关闭的时候删除 dom\n   */\n\n  var shouldRenderFormItems = useMemo(function () {\n    if (isFirstRender.current && visible === false) {\n      return false;\n    }\n\n    if (visible === false && (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose)) {\n      return false;\n    }\n\n    return true;\n  }, [visible, modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose]);\n  /** 同步 props 和 本地的 ref */\n\n  var formRef = useRef();\n  /** 如果 destroyOnClose ，重置一下表单 */\n\n  useEffect(function () {\n    if (visible) {\n      isFirstRender.current = false;\n    }\n  }, [modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose, visible]);\n  useImperativeHandle(rest.formRef, function () {\n    return formRef.current;\n  });\n  var renderSubmitter = rest.submitter === false ? false : _objectSpread(_objectSpread({}, rest.submitter), {}, {\n    searchConfig: _objectSpread({\n      submitText: (modalProps === null || modalProps === void 0 ? void 0 : modalProps.okText) || ((_context$locale = context.locale) === null || _context$locale === void 0 ? void 0 : (_context$locale$Modal = _context$locale.Modal) === null || _context$locale$Modal === void 0 ? void 0 : _context$locale$Modal.okText) || '确认',\n      resetText: (modalProps === null || modalProps === void 0 ? void 0 : modalProps.cancelText) || ((_context$locale2 = context.locale) === null || _context$locale2 === void 0 ? void 0 : (_context$locale2$Moda = _context$locale2.Modal) === null || _context$locale2$Moda === void 0 ? void 0 : _context$locale2$Moda.cancelText) || '取消'\n    }, (_rest$submitter = rest.submitter) === null || _rest$submitter === void 0 ? void 0 : _rest$submitter.searchConfig),\n    submitButtonProps: _objectSpread({\n      type: (modalProps === null || modalProps === void 0 ? void 0 : modalProps.okType) || 'primary'\n    }, (_rest$submitter2 = rest.submitter) === null || _rest$submitter2 === void 0 ? void 0 : _rest$submitter2.submitButtonProps),\n    resetButtonProps: _objectSpread({\n      preventDefault: true,\n      onClick: function onClick(e) {\n        var _modalProps$onCancel;\n\n        modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$onCancel = modalProps.onCancel) === null || _modalProps$onCancel === void 0 ? void 0 : _modalProps$onCancel.call(modalProps, e);\n        setVisible(false);\n      }\n    }, (_rest$submitter3 = rest.submitter) === null || _rest$submitter3 === void 0 ? void 0 : _rest$submitter3.resetButtonProps)\n  });\n  var formDom = /*#__PURE__*/React.createElement(\"div\", {\n    ref: domRef,\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    }\n  }, /*#__PURE__*/React.createElement(BaseForm, _extends({\n    key: key,\n    formComponentType: \"ModalForm\",\n    layout: \"vertical\"\n  }, omit(rest, ['visible']), {\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (onFinish) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.next = 4;\n                return onFinish(values);\n\n              case 4:\n                success = _context.sent;\n\n                if (success) {\n                  setVisible(false);\n                  setTimeout(function () {\n                    var _formRef$current;\n\n                    if (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose) (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n                  }, 300);\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    submitter: renderSubmitter,\n    contentRender: function contentRender(item, submitter) {\n      return /*#__PURE__*/React.createElement(_Modal, _extends({\n        title: title,\n        width: width || 800\n      }, modalProps, {\n        afterClose: function afterClose() {\n          var _modalProps$afterClos;\n\n          modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$afterClos = modalProps.afterClose) === null || _modalProps$afterClos === void 0 ? void 0 : _modalProps$afterClos.call(modalProps);\n        },\n        getContainer: false,\n        visible: visible,\n        onCancel: function onCancel(e) {\n          var _modalProps$onCancel2;\n\n          setVisible(false);\n          modalProps === null || modalProps === void 0 ? void 0 : (_modalProps$onCancel2 = modalProps.onCancel) === null || _modalProps$onCancel2 === void 0 ? void 0 : _modalProps$onCancel2.call(modalProps, e);\n        },\n        footer: submitter === undefined ? null : submitter\n      }), shouldRenderFormItems ? item : null);\n    }\n  }), children));\n  /** 这个是为了支持 ssr */\n\n  var portalRenderDom = useMemo(function () {\n    if (typeof window === 'undefined') return undefined;\n    return renderDom || document.body;\n  }, [renderDom]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, renderDom !== false && portalRenderDom ? /*#__PURE__*/createPortal(formDom, portalRenderDom) : formDom, trigger && /*#__PURE__*/React.cloneElement(trigger, _objectSpread(_objectSpread({}, trigger.props), {}, {\n    onClick: function () {\n      var _onClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n        var _trigger$props, _trigger$props$onClic;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!visible && (modalProps === null || modalProps === void 0 ? void 0 : modalProps.destroyOnClose))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return setKey(key + 1);\n\n              case 3:\n                setVisible(!visible);\n                (_trigger$props = trigger.props) === null || _trigger$props === void 0 ? void 0 : (_trigger$props$onClic = _trigger$props.onClick) === null || _trigger$props$onClic === void 0 ? void 0 : _trigger$props$onClic.call(_trigger$props, e);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function onClick(_x2) {\n        return _onClick.apply(this, arguments);\n      }\n\n      return onClick;\n    }()\n  })));\n}\n\nexport default ModalForm;"]},"metadata":{},"sourceType":"module"}