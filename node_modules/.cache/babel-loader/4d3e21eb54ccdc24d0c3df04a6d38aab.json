{"ast":null,"code":"import \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/tooltip/style\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"creatorButtonProps\", \"deleteIconProps\", \"copyIconProps\", \"itemContainerRender\", \"itemRender\", \"prefixCls\", \"creatorRecord\", \"action\", \"children\", \"actionRender\", \"fields\", \"meta\", \"field\", \"index\", \"formInstance\", \"alwaysShowItemLabel\"],\n    _excluded2 = [\"actionRender\", \"creatorButtonProps\", \"label\", \"alwaysShowItemLabel\", \"tooltip\", \"creatorRecord\", \"itemRender\", \"rules\", \"itemContainerRender\", \"copyIconProps\", \"children\", \"deleteIconProps\", \"actionRef\"];\nimport { CopyOutlined, DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport { runFunction } from '@ant-design/pro-utils';\nimport omit from 'omit.js';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport get from \"rc-util/es/utils/get\";\nimport React, { useContext, useImperativeHandle, useMemo, useRef } from 'react';\nimport './index.less';\nvar FormListContext = /*#__PURE__*/React.createContext({});\n/** Antd 自带的toArray 不这次方法，所以需要自己搞一个 */\n\nvar listToArray = function listToArray(children) {\n  if (Array.isArray(children)) {\n    return children;\n  }\n\n  if (typeof children === 'function') {\n    return [children];\n  }\n\n  return toArray(children);\n};\n\nvar ProFormListItem = function ProFormListItem(props) {\n  var _formInstance$getFiel;\n\n  var creatorButtonProps = props.creatorButtonProps,\n      deleteIconProps = props.deleteIconProps,\n      copyIconProps = props.copyIconProps,\n      itemContainerRender = props.itemContainerRender,\n      itemRender = props.itemRender,\n      prefixCls = props.prefixCls,\n      creatorRecord = props.creatorRecord,\n      action = props.action,\n      children = props.children,\n      actionRender = props.actionRender,\n      fields = props.fields,\n      meta = props.meta,\n      field = props.field,\n      index = props.index,\n      formInstance = props.formInstance,\n      alwaysShowItemLabel = props.alwaysShowItemLabel,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var listContext = useContext(FormListContext);\n  var childrenArray = listToArray(children).map(function (childrenItem) {\n    if (typeof childrenItem === 'function') {\n      return childrenItem === null || childrenItem === void 0 ? void 0 : childrenItem(field, index, action);\n    }\n\n    return childrenItem;\n  }).map(function (childrenItem, childIndex) {\n    if ( /*#__PURE__*/React.isValidElement(childrenItem)) {\n      return /*#__PURE__*/React.cloneElement(childrenItem, _objectSpread({\n        // eslint-disable-next-line react/no-array-index-key\n        key: childIndex\n      }, childrenItem === null || childrenItem === void 0 ? void 0 : childrenItem.props));\n    }\n\n    return childrenItem;\n  });\n  var copyIcon = useMemo(function () {\n    /** 复制按钮的配置 */\n    if (!copyIconProps) return null;\n    var _copyIconProps$Icon = copyIconProps.Icon,\n        Icon = _copyIconProps$Icon === void 0 ? CopyOutlined : _copyIconProps$Icon,\n        tooltipText = copyIconProps.tooltipText;\n    return /*#__PURE__*/React.createElement(_Tooltip, {\n      title: tooltipText,\n      key: \"copy\"\n    }, /*#__PURE__*/React.createElement(Icon, {\n      className: \"\".concat(prefixCls, \"-action-icon\"),\n      onClick: function onClick() {\n        action.add(formInstance === null || formInstance === void 0 ? void 0 : formInstance.getFieldValue([listContext.listName, rest.name, field.name].filter(function (item) {\n          return item !== undefined;\n        }).flat(1)));\n      }\n    }));\n  }, [action, copyIconProps, field.name, formInstance, listContext.listName, prefixCls, rest.name]);\n  var deleteIcon = useMemo(function () {\n    if (!deleteIconProps) return null;\n    var _deleteIconProps$Icon = deleteIconProps.Icon,\n        Icon = _deleteIconProps$Icon === void 0 ? DeleteOutlined : _deleteIconProps$Icon,\n        tooltipText = deleteIconProps.tooltipText;\n    return /*#__PURE__*/React.createElement(_Tooltip, {\n      title: tooltipText,\n      key: \"delete\"\n    }, /*#__PURE__*/React.createElement(Icon, {\n      className: \"\".concat(prefixCls, \"-action-icon\"),\n      onClick: function onClick() {\n        return action.remove(field.name);\n      }\n    }));\n  }, [action, deleteIconProps, field.name, prefixCls]);\n  var defaultActionDom = useMemo(function () {\n    return [copyIcon, deleteIcon].filter(Boolean);\n  }, [copyIcon, deleteIcon]);\n  var actions = (actionRender === null || actionRender === void 0 ? void 0 : actionRender(field, action, defaultActionDom)) || defaultActionDom;\n  var dom = actions.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-action\")\n  }, actions) : null;\n  var options = {\n    field: field,\n    index: index,\n    record: formInstance === null || formInstance === void 0 ? void 0 : (_formInstance$getFiel = formInstance.getFieldValue) === null || _formInstance$getFiel === void 0 ? void 0 : _formInstance$getFiel.call(formInstance, [listContext.listName, rest.name, field.name].filter(function (item) {\n      return item !== undefined;\n    }).flat(1)),\n    fields: fields,\n    operation: action,\n    meta: meta\n  };\n  var itemContainer = (itemContainerRender === null || itemContainerRender === void 0 ? void 0 : itemContainerRender(childrenArray, options)) || childrenArray;\n  var contentDom = (itemRender === null || itemRender === void 0 ? void 0 : itemRender({\n    listDom: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-container\")\n    }, itemContainer),\n    action: dom\n  }, options)) || /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-item\").concat(alwaysShowItemLabel ? \" \".concat(prefixCls, \"-item-show-label\") : ''),\n    style: {\n      display: 'flex',\n      alignItems: 'flex-end'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-container\")\n  }, itemContainer), dom);\n  return /*#__PURE__*/React.createElement(FormListContext.Provider, {\n    key: field.name,\n    value: _objectSpread(_objectSpread({}, field), {}, {\n      listName: [listContext.listName, rest.originName, field.name].filter(function (item) {\n        return item !== undefined;\n      }).flat(1)\n    })\n  }, contentDom);\n};\n\nvar ProFormListContainer = function ProFormListContainer(props) {\n  var creatorButtonProps = props.creatorButtonProps,\n      prefixCls = props.prefixCls,\n      children = props.children,\n      creatorRecord = props.creatorRecord,\n      action = props.action,\n      fields = props.fields;\n  var creatorButton = useMemo(function () {\n    if (creatorButtonProps === false) return null;\n\n    var _ref = creatorButtonProps || {},\n        _ref$position = _ref.position,\n        position = _ref$position === void 0 ? 'bottom' : _ref$position,\n        _ref$creatorButtonTex = _ref.creatorButtonText,\n        creatorButtonText = _ref$creatorButtonTex === void 0 ? '添加一行数据' : _ref$creatorButtonTex;\n\n    return /*#__PURE__*/React.createElement(_Button, _extends({\n      className: \"\".concat(prefixCls, \"-creator-button-\").concat(position),\n      type: \"dashed\",\n      block: true,\n      icon: /*#__PURE__*/React.createElement(PlusOutlined, null)\n    }, omit(creatorButtonProps || {}, ['position', 'creatorButtonText']), {\n      onClick: function onClick() {\n        var index; // 如果是顶部，加到第一个，如果不是，为空就是最后一个\n\n        if (position === 'top') index = 0;\n        action.add(runFunction(creatorRecord), index);\n      }\n    }), creatorButtonText);\n  }, [action, creatorButtonProps, creatorRecord, prefixCls]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 'max-content',\n      maxWidth: '100%'\n    }\n  }, creatorButtonProps !== false && (creatorButtonProps === null || creatorButtonProps === void 0 ? void 0 : creatorButtonProps.position) === 'top' && creatorButton, fields.map(function (field, index) {\n    return /*#__PURE__*/React.createElement(ProFormListItem, _extends({\n      key: field.key\n    }, props, {\n      field: field,\n      index: index\n    }), children);\n  }), creatorButtonProps !== false && (creatorButtonProps === null || creatorButtonProps === void 0 ? void 0 : creatorButtonProps.position) !== 'top' && creatorButton);\n};\n\nvar ProFormList = function ProFormList(_ref2) {\n  var actionRender = _ref2.actionRender,\n      creatorButtonProps = _ref2.creatorButtonProps,\n      label = _ref2.label,\n      alwaysShowItemLabel = _ref2.alwaysShowItemLabel,\n      tooltip = _ref2.tooltip,\n      creatorRecord = _ref2.creatorRecord,\n      itemRender = _ref2.itemRender,\n      rules = _ref2.rules,\n      itemContainerRender = _ref2.itemContainerRender,\n      _ref2$copyIconProps = _ref2.copyIconProps,\n      copyIconProps = _ref2$copyIconProps === void 0 ? {\n    Icon: CopyOutlined,\n    tooltipText: '复制此行'\n  } : _ref2$copyIconProps,\n      children = _ref2.children,\n      _ref2$deleteIconProps = _ref2.deleteIconProps,\n      deleteIconProps = _ref2$deleteIconProps === void 0 ? {\n    Icon: DeleteOutlined,\n    tooltipText: '删除此行'\n  } : _ref2$deleteIconProps,\n      actionRef = _ref2.actionRef,\n      rest = _objectWithoutProperties(_ref2, _excluded2);\n\n  var actionRefs = useRef();\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var listContext = useContext(FormListContext);\n  var baseClassName = context.getPrefixCls('pro-form-list'); // 处理 list 的嵌套\n\n  var name = useMemo(function () {\n    if (listContext.name === undefined) {\n      return [rest.name].flat(1);\n    }\n\n    return [listContext.name, rest.name].flat(1);\n  }, [listContext.name, rest.name]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useImperativeHandle(actionRef, function () {\n    return actionRefs.current;\n  }, [actionRefs.current]);\n  return /*#__PURE__*/React.createElement(_Form.Item, {\n    label: label,\n    tooltip: tooltip,\n    rules: rules,\n    shouldUpdate: function shouldUpdate(prevValues, nextValues) {\n      return get(prevValues, name) !== get(nextValues, name);\n    }\n  }, function (formInstance) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: baseClassName\n    }, /*#__PURE__*/React.createElement(_Form.List, _extends({\n      rules: rules\n    }, rest, {\n      name: name\n    }), function (fields, action, meta) {\n      // 将 action 暴露给外部\n      actionRefs.current = action;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProFormListContainer, {\n        name: name,\n        originName: rest.name,\n        copyIconProps: copyIconProps,\n        deleteIconProps: deleteIconProps,\n        formInstance: formInstance,\n        prefixCls: baseClassName,\n        meta: meta,\n        fields: fields,\n        itemContainerRender: itemContainerRender,\n        itemRender: itemRender,\n        creatorButtonProps: creatorButtonProps,\n        creatorRecord: creatorRecord,\n        actionRender: actionRender,\n        action: action,\n        alwaysShowItemLabel: alwaysShowItemLabel\n      }, children), /*#__PURE__*/React.createElement(_Form.ErrorList, {\n        errors: meta.errors\n      }));\n    }));\n  });\n};\n\nexport { FormListContext };\nexport default ProFormList;","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/components/List/index.js"],"names":["_Form","_ConfigProvider","_Button","_extends","_Tooltip","_objectSpread","_objectWithoutProperties","_excluded","_excluded2","CopyOutlined","DeleteOutlined","PlusOutlined","runFunction","omit","toArray","get","React","useContext","useImperativeHandle","useMemo","useRef","FormListContext","createContext","listToArray","children","Array","isArray","ProFormListItem","props","_formInstance$getFiel","creatorButtonProps","deleteIconProps","copyIconProps","itemContainerRender","itemRender","prefixCls","creatorRecord","action","actionRender","fields","meta","field","index","formInstance","alwaysShowItemLabel","rest","listContext","childrenArray","map","childrenItem","childIndex","isValidElement","cloneElement","key","copyIcon","_copyIconProps$Icon","Icon","tooltipText","createElement","title","className","concat","onClick","add","getFieldValue","listName","name","filter","item","undefined","flat","deleteIcon","_deleteIconProps$Icon","remove","defaultActionDom","Boolean","actions","dom","length","options","record","call","operation","itemContainer","contentDom","listDom","style","display","alignItems","Provider","value","originName","ProFormListContainer","creatorButton","_ref","_ref$position","position","_ref$creatorButtonTex","creatorButtonText","type","block","icon","width","maxWidth","ProFormList","_ref2","label","tooltip","rules","_ref2$copyIconProps","_ref2$deleteIconProps","actionRef","actionRefs","context","ConfigContext","baseClassName","getPrefixCls","current","Item","shouldUpdate","prevValues","nextValues","List","Fragment","ErrorList","errors"],"mappings":"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","sourcesContent":["import \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/tooltip/style\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"creatorButtonProps\", \"deleteIconProps\", \"copyIconProps\", \"itemContainerRender\", \"itemRender\", \"prefixCls\", \"creatorRecord\", \"action\", \"children\", \"actionRender\", \"fields\", \"meta\", \"field\", \"index\", \"formInstance\", \"alwaysShowItemLabel\"],\n    _excluded2 = [\"actionRender\", \"creatorButtonProps\", \"label\", \"alwaysShowItemLabel\", \"tooltip\", \"creatorRecord\", \"itemRender\", \"rules\", \"itemContainerRender\", \"copyIconProps\", \"children\", \"deleteIconProps\", \"actionRef\"];\nimport { CopyOutlined, DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport { runFunction } from '@ant-design/pro-utils';\nimport omit from 'omit.js';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport get from \"rc-util/es/utils/get\";\nimport React, { useContext, useImperativeHandle, useMemo, useRef } from 'react';\nimport './index.less';\nvar FormListContext = /*#__PURE__*/React.createContext({});\n/** Antd 自带的toArray 不这次方法，所以需要自己搞一个 */\n\nvar listToArray = function listToArray(children) {\n  if (Array.isArray(children)) {\n    return children;\n  }\n\n  if (typeof children === 'function') {\n    return [children];\n  }\n\n  return toArray(children);\n};\n\nvar ProFormListItem = function ProFormListItem(props) {\n  var _formInstance$getFiel;\n\n  var creatorButtonProps = props.creatorButtonProps,\n      deleteIconProps = props.deleteIconProps,\n      copyIconProps = props.copyIconProps,\n      itemContainerRender = props.itemContainerRender,\n      itemRender = props.itemRender,\n      prefixCls = props.prefixCls,\n      creatorRecord = props.creatorRecord,\n      action = props.action,\n      children = props.children,\n      actionRender = props.actionRender,\n      fields = props.fields,\n      meta = props.meta,\n      field = props.field,\n      index = props.index,\n      formInstance = props.formInstance,\n      alwaysShowItemLabel = props.alwaysShowItemLabel,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var listContext = useContext(FormListContext);\n  var childrenArray = listToArray(children).map(function (childrenItem) {\n    if (typeof childrenItem === 'function') {\n      return childrenItem === null || childrenItem === void 0 ? void 0 : childrenItem(field, index, action);\n    }\n\n    return childrenItem;\n  }).map(function (childrenItem, childIndex) {\n    if ( /*#__PURE__*/React.isValidElement(childrenItem)) {\n      return /*#__PURE__*/React.cloneElement(childrenItem, _objectSpread({\n        // eslint-disable-next-line react/no-array-index-key\n        key: childIndex\n      }, childrenItem === null || childrenItem === void 0 ? void 0 : childrenItem.props));\n    }\n\n    return childrenItem;\n  });\n  var copyIcon = useMemo(function () {\n    /** 复制按钮的配置 */\n    if (!copyIconProps) return null;\n    var _copyIconProps$Icon = copyIconProps.Icon,\n        Icon = _copyIconProps$Icon === void 0 ? CopyOutlined : _copyIconProps$Icon,\n        tooltipText = copyIconProps.tooltipText;\n    return /*#__PURE__*/React.createElement(_Tooltip, {\n      title: tooltipText,\n      key: \"copy\"\n    }, /*#__PURE__*/React.createElement(Icon, {\n      className: \"\".concat(prefixCls, \"-action-icon\"),\n      onClick: function onClick() {\n        action.add(formInstance === null || formInstance === void 0 ? void 0 : formInstance.getFieldValue([listContext.listName, rest.name, field.name].filter(function (item) {\n          return item !== undefined;\n        }).flat(1)));\n      }\n    }));\n  }, [action, copyIconProps, field.name, formInstance, listContext.listName, prefixCls, rest.name]);\n  var deleteIcon = useMemo(function () {\n    if (!deleteIconProps) return null;\n    var _deleteIconProps$Icon = deleteIconProps.Icon,\n        Icon = _deleteIconProps$Icon === void 0 ? DeleteOutlined : _deleteIconProps$Icon,\n        tooltipText = deleteIconProps.tooltipText;\n    return /*#__PURE__*/React.createElement(_Tooltip, {\n      title: tooltipText,\n      key: \"delete\"\n    }, /*#__PURE__*/React.createElement(Icon, {\n      className: \"\".concat(prefixCls, \"-action-icon\"),\n      onClick: function onClick() {\n        return action.remove(field.name);\n      }\n    }));\n  }, [action, deleteIconProps, field.name, prefixCls]);\n  var defaultActionDom = useMemo(function () {\n    return [copyIcon, deleteIcon].filter(Boolean);\n  }, [copyIcon, deleteIcon]);\n  var actions = (actionRender === null || actionRender === void 0 ? void 0 : actionRender(field, action, defaultActionDom)) || defaultActionDom;\n  var dom = actions.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-action\")\n  }, actions) : null;\n  var options = {\n    field: field,\n    index: index,\n    record: formInstance === null || formInstance === void 0 ? void 0 : (_formInstance$getFiel = formInstance.getFieldValue) === null || _formInstance$getFiel === void 0 ? void 0 : _formInstance$getFiel.call(formInstance, [listContext.listName, rest.name, field.name].filter(function (item) {\n      return item !== undefined;\n    }).flat(1)),\n    fields: fields,\n    operation: action,\n    meta: meta\n  };\n  var itemContainer = (itemContainerRender === null || itemContainerRender === void 0 ? void 0 : itemContainerRender(childrenArray, options)) || childrenArray;\n  var contentDom = (itemRender === null || itemRender === void 0 ? void 0 : itemRender({\n    listDom: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-container\")\n    }, itemContainer),\n    action: dom\n  }, options)) || /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-item\").concat(alwaysShowItemLabel ? \" \".concat(prefixCls, \"-item-show-label\") : ''),\n    style: {\n      display: 'flex',\n      alignItems: 'flex-end'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-container\")\n  }, itemContainer), dom);\n  return /*#__PURE__*/React.createElement(FormListContext.Provider, {\n    key: field.name,\n    value: _objectSpread(_objectSpread({}, field), {}, {\n      listName: [listContext.listName, rest.originName, field.name].filter(function (item) {\n        return item !== undefined;\n      }).flat(1)\n    })\n  }, contentDom);\n};\n\nvar ProFormListContainer = function ProFormListContainer(props) {\n  var creatorButtonProps = props.creatorButtonProps,\n      prefixCls = props.prefixCls,\n      children = props.children,\n      creatorRecord = props.creatorRecord,\n      action = props.action,\n      fields = props.fields;\n  var creatorButton = useMemo(function () {\n    if (creatorButtonProps === false) return null;\n\n    var _ref = creatorButtonProps || {},\n        _ref$position = _ref.position,\n        position = _ref$position === void 0 ? 'bottom' : _ref$position,\n        _ref$creatorButtonTex = _ref.creatorButtonText,\n        creatorButtonText = _ref$creatorButtonTex === void 0 ? '添加一行数据' : _ref$creatorButtonTex;\n\n    return /*#__PURE__*/React.createElement(_Button, _extends({\n      className: \"\".concat(prefixCls, \"-creator-button-\").concat(position),\n      type: \"dashed\",\n      block: true,\n      icon: /*#__PURE__*/React.createElement(PlusOutlined, null)\n    }, omit(creatorButtonProps || {}, ['position', 'creatorButtonText']), {\n      onClick: function onClick() {\n        var index; // 如果是顶部，加到第一个，如果不是，为空就是最后一个\n\n        if (position === 'top') index = 0;\n        action.add(runFunction(creatorRecord), index);\n      }\n    }), creatorButtonText);\n  }, [action, creatorButtonProps, creatorRecord, prefixCls]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 'max-content',\n      maxWidth: '100%'\n    }\n  }, creatorButtonProps !== false && (creatorButtonProps === null || creatorButtonProps === void 0 ? void 0 : creatorButtonProps.position) === 'top' && creatorButton, fields.map(function (field, index) {\n    return /*#__PURE__*/React.createElement(ProFormListItem, _extends({\n      key: field.key\n    }, props, {\n      field: field,\n      index: index\n    }), children);\n  }), creatorButtonProps !== false && (creatorButtonProps === null || creatorButtonProps === void 0 ? void 0 : creatorButtonProps.position) !== 'top' && creatorButton);\n};\n\nvar ProFormList = function ProFormList(_ref2) {\n  var actionRender = _ref2.actionRender,\n      creatorButtonProps = _ref2.creatorButtonProps,\n      label = _ref2.label,\n      alwaysShowItemLabel = _ref2.alwaysShowItemLabel,\n      tooltip = _ref2.tooltip,\n      creatorRecord = _ref2.creatorRecord,\n      itemRender = _ref2.itemRender,\n      rules = _ref2.rules,\n      itemContainerRender = _ref2.itemContainerRender,\n      _ref2$copyIconProps = _ref2.copyIconProps,\n      copyIconProps = _ref2$copyIconProps === void 0 ? {\n    Icon: CopyOutlined,\n    tooltipText: '复制此行'\n  } : _ref2$copyIconProps,\n      children = _ref2.children,\n      _ref2$deleteIconProps = _ref2.deleteIconProps,\n      deleteIconProps = _ref2$deleteIconProps === void 0 ? {\n    Icon: DeleteOutlined,\n    tooltipText: '删除此行'\n  } : _ref2$deleteIconProps,\n      actionRef = _ref2.actionRef,\n      rest = _objectWithoutProperties(_ref2, _excluded2);\n\n  var actionRefs = useRef();\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var listContext = useContext(FormListContext);\n  var baseClassName = context.getPrefixCls('pro-form-list'); // 处理 list 的嵌套\n\n  var name = useMemo(function () {\n    if (listContext.name === undefined) {\n      return [rest.name].flat(1);\n    }\n\n    return [listContext.name, rest.name].flat(1);\n  }, [listContext.name, rest.name]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useImperativeHandle(actionRef, function () {\n    return actionRefs.current;\n  }, [actionRefs.current]);\n  return /*#__PURE__*/React.createElement(_Form.Item, {\n    label: label,\n    tooltip: tooltip,\n    rules: rules,\n    shouldUpdate: function shouldUpdate(prevValues, nextValues) {\n      return get(prevValues, name) !== get(nextValues, name);\n    }\n  }, function (formInstance) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: baseClassName\n    }, /*#__PURE__*/React.createElement(_Form.List, _extends({\n      rules: rules\n    }, rest, {\n      name: name\n    }), function (fields, action, meta) {\n      // 将 action 暴露给外部\n      actionRefs.current = action;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProFormListContainer, {\n        name: name,\n        originName: rest.name,\n        copyIconProps: copyIconProps,\n        deleteIconProps: deleteIconProps,\n        formInstance: formInstance,\n        prefixCls: baseClassName,\n        meta: meta,\n        fields: fields,\n        itemContainerRender: itemContainerRender,\n        itemRender: itemRender,\n        creatorButtonProps: creatorButtonProps,\n        creatorRecord: creatorRecord,\n        actionRender: actionRender,\n        action: action,\n        alwaysShowItemLabel: alwaysShowItemLabel\n      }, children), /*#__PURE__*/React.createElement(_Form.ErrorList, {\n        errors: meta.errors\n      }));\n    }));\n  });\n};\n\nexport { FormListContext };\nexport default ProFormList;"]},"metadata":{},"sourceType":"module"}