{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nvar _excluded = [\"children\", \"space\", \"valuePropName\"];\nimport React, { useImperativeHandle } from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport createField from '../../BaseForm/createField';\nvar FieldSetType = {\n  space: _Space,\n  group: _Input.Group\n};\nexport function defaultGetValueFromEvent(valuePropName) {\n  var event = arguments.length <= 1 ? undefined : arguments[1];\n\n  if (event && event.target && valuePropName in event.target) {\n    return event.target[valuePropName];\n  }\n\n  return event;\n}\n\nvar FieldSet = function FieldSet(_ref) {\n  var children = _ref.children,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? [] : _ref$value,\n      valuePropName = _ref.valuePropName,\n      onChange = _ref.onChange,\n      fieldProps = _ref.fieldProps,\n      space = _ref.space,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'space' : _ref$type;\n\n  var fieldSetOnChange = function fieldSetOnChange(fileValue, index) {\n    var _fieldProps$onChange;\n\n    var newValues = _toConsumableArray(value);\n\n    newValues[index] = defaultGetValueFromEvent(valuePropName || 'value', fileValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(newValues);\n    fieldProps === null || fieldProps === void 0 ? void 0 : (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call(fieldProps, newValues);\n  };\n\n  var itemIndex = -1;\n  var list = toArray(children).map(function (item) {\n    if ( /*#__PURE__*/React.isValidElement(item)) {\n      var _item$type, _item$props, _item$props2;\n\n      itemIndex += 1;\n      var index = itemIndex;\n      var isProFromItem = // @ts-ignore\n      (item === null || item === void 0 ? void 0 : (_item$type = item.type) === null || _item$type === void 0 ? void 0 : _item$type.displayName) === 'ProFormComponent' || (item === null || item === void 0 ? void 0 : (_item$props = item.props) === null || _item$props === void 0 ? void 0 : _item$props.readonly);\n      var forkProps = isProFromItem ? _objectSpread(_objectSpread({\n        key: index,\n        ignoreFormItem: true\n      }, item.props || {}), {}, {\n        // 如果不是我们自定义的组件 fieldProps 无法识别\n        fieldProps: _objectSpread(_objectSpread({}, item === null || item === void 0 ? void 0 : (_item$props2 = item.props) === null || _item$props2 === void 0 ? void 0 : _item$props2.fieldProps), {}, {\n          onChange: function onChange() {\n            fieldSetOnChange(arguments.length <= 0 ? undefined : arguments[0], index);\n          }\n        }),\n        value: value[index],\n        onChange: undefined\n      }) : _objectSpread(_objectSpread({\n        key: index\n      }, item.props || {}), {}, {\n        value: value[index],\n        onChange: function onChange(itemValue) {\n          var _item$props$onChange, _item$props3;\n\n          fieldSetOnChange(itemValue, index);\n          (_item$props$onChange = (_item$props3 = item.props).onChange) === null || _item$props$onChange === void 0 ? void 0 : _item$props$onChange.call(_item$props3, itemValue);\n        }\n      });\n      return /*#__PURE__*/React.cloneElement(item, forkProps);\n    }\n\n    return item;\n  });\n  var Components = FieldSetType[type];\n  /** Input.Group 需要配置 compact */\n\n  var typeProps = _objectSpread({}, type === 'group' ? {\n    compact: true\n  } : {});\n\n  return /*#__PURE__*/React.createElement(Components, _extends({}, typeProps, space, {\n    align: \"start\"\n  }), list);\n};\n\nvar ProFormFieldSet = /*#__PURE__*/React.forwardRef(function (_ref2, ref) {\n  var children = _ref2.children,\n      space = _ref2.space,\n      valuePropName = _ref2.valuePropName,\n      rest = _objectWithoutProperties(_ref2, _excluded);\n\n  useImperativeHandle(ref, function () {\n    return {};\n  });\n  return /*#__PURE__*/React.createElement(FieldSet, _extends({\n    space: space,\n    valuePropName: valuePropName\n  }, rest.fieldProps, {\n    // 把 fieldProps 里的重置掉\n    onChange: undefined\n  }, rest), children);\n});\nexport default createField(ProFormFieldSet);","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/components/FieldSet/index.js"],"names":["_objectWithoutProperties","_extends","_objectSpread","_toConsumableArray","_Input","_Space","_excluded","React","useImperativeHandle","toArray","createField","FieldSetType","space","group","Group","defaultGetValueFromEvent","valuePropName","event","arguments","length","undefined","target","FieldSet","_ref","children","_ref$value","value","onChange","fieldProps","_ref$type","type","fieldSetOnChange","fileValue","index","_fieldProps$onChange","newValues","call","itemIndex","list","map","item","isValidElement","_item$type","_item$props","_item$props2","isProFromItem","displayName","props","readonly","forkProps","key","ignoreFormItem","itemValue","_item$props$onChange","_item$props3","cloneElement","Components","typeProps","compact","createElement","align","ProFormFieldSet","forwardRef","_ref2","ref","rest"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nvar _excluded = [\"children\", \"space\", \"valuePropName\"];\nimport React, { useImperativeHandle } from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport createField from '../../BaseForm/createField';\nvar FieldSetType = {\n  space: _Space,\n  group: _Input.Group\n};\nexport function defaultGetValueFromEvent(valuePropName) {\n  var event = arguments.length <= 1 ? undefined : arguments[1];\n\n  if (event && event.target && valuePropName in event.target) {\n    return event.target[valuePropName];\n  }\n\n  return event;\n}\n\nvar FieldSet = function FieldSet(_ref) {\n  var children = _ref.children,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? [] : _ref$value,\n      valuePropName = _ref.valuePropName,\n      onChange = _ref.onChange,\n      fieldProps = _ref.fieldProps,\n      space = _ref.space,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'space' : _ref$type;\n\n  var fieldSetOnChange = function fieldSetOnChange(fileValue, index) {\n    var _fieldProps$onChange;\n\n    var newValues = _toConsumableArray(value);\n\n    newValues[index] = defaultGetValueFromEvent(valuePropName || 'value', fileValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(newValues);\n    fieldProps === null || fieldProps === void 0 ? void 0 : (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call(fieldProps, newValues);\n  };\n\n  var itemIndex = -1;\n  var list = toArray(children).map(function (item) {\n    if ( /*#__PURE__*/React.isValidElement(item)) {\n      var _item$type, _item$props, _item$props2;\n\n      itemIndex += 1;\n      var index = itemIndex;\n      var isProFromItem = // @ts-ignore\n      (item === null || item === void 0 ? void 0 : (_item$type = item.type) === null || _item$type === void 0 ? void 0 : _item$type.displayName) === 'ProFormComponent' || (item === null || item === void 0 ? void 0 : (_item$props = item.props) === null || _item$props === void 0 ? void 0 : _item$props.readonly);\n      var forkProps = isProFromItem ? _objectSpread(_objectSpread({\n        key: index,\n        ignoreFormItem: true\n      }, item.props || {}), {}, {\n        // 如果不是我们自定义的组件 fieldProps 无法识别\n        fieldProps: _objectSpread(_objectSpread({}, item === null || item === void 0 ? void 0 : (_item$props2 = item.props) === null || _item$props2 === void 0 ? void 0 : _item$props2.fieldProps), {}, {\n          onChange: function onChange() {\n            fieldSetOnChange(arguments.length <= 0 ? undefined : arguments[0], index);\n          }\n        }),\n        value: value[index],\n        onChange: undefined\n      }) : _objectSpread(_objectSpread({\n        key: index\n      }, item.props || {}), {}, {\n        value: value[index],\n        onChange: function onChange(itemValue) {\n          var _item$props$onChange, _item$props3;\n\n          fieldSetOnChange(itemValue, index);\n          (_item$props$onChange = (_item$props3 = item.props).onChange) === null || _item$props$onChange === void 0 ? void 0 : _item$props$onChange.call(_item$props3, itemValue);\n        }\n      });\n      return /*#__PURE__*/React.cloneElement(item, forkProps);\n    }\n\n    return item;\n  });\n  var Components = FieldSetType[type];\n  /** Input.Group 需要配置 compact */\n\n  var typeProps = _objectSpread({}, type === 'group' ? {\n    compact: true\n  } : {});\n\n  return /*#__PURE__*/React.createElement(Components, _extends({}, typeProps, space, {\n    align: \"start\"\n  }), list);\n};\n\nvar ProFormFieldSet = /*#__PURE__*/React.forwardRef(function (_ref2, ref) {\n  var children = _ref2.children,\n      space = _ref2.space,\n      valuePropName = _ref2.valuePropName,\n      rest = _objectWithoutProperties(_ref2, _excluded);\n\n  useImperativeHandle(ref, function () {\n    return {};\n  });\n  return /*#__PURE__*/React.createElement(FieldSet, _extends({\n    space: space,\n    valuePropName: valuePropName\n  }, rest.fieldProps, {\n    // 把 fieldProps 里的重置掉\n    onChange: undefined\n  }, rest), children);\n});\nexport default createField(ProFormFieldSet);"]},"metadata":{},"sourceType":"module"}