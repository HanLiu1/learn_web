{"ast":null,"code":"import \"antd/es/drawer/style\";\nimport _Drawer from \"antd/es/drawer\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\", \"trigger\", \"onVisibleChange\", \"drawerProps\", \"onFinish\", \"title\", \"width\"];\nimport React, { useContext, useEffect, useMemo, useImperativeHandle, useRef, useState } from 'react';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport { createPortal } from 'react-dom';\nimport omit from 'omit.js';\nimport BaseForm from '../../BaseForm';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport ScrollLocker from \"rc-util/es/Dom/scrollLocker\";\n\nfunction DrawerForm(_ref) {\n  var _rest$submitter, _rest$submitter2;\n\n  var children = _ref.children,\n      trigger = _ref.trigger,\n      onVisibleChange = _ref.onVisibleChange,\n      drawerProps = _ref.drawerProps,\n      onFinish = _ref.onFinish,\n      title = _ref.title,\n      width = _ref.width,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var _useMergedState = useMergedState(!!rest.visible, {\n    value: rest.visible,\n    onChange: onVisibleChange\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(0),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      key = _useMergedState4[0],\n      setKey = _useMergedState4[1];\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var renderDom = useMemo(function () {\n    var _context$getPopupCont;\n\n    if ((drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) === false) {\n      return false;\n    }\n\n    if (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) {\n      if (typeof (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) === 'function') {\n        var _drawerProps$getConta;\n\n        return drawerProps === null || drawerProps === void 0 ? void 0 : (_drawerProps$getConta = drawerProps.getContainer) === null || _drawerProps$getConta === void 0 ? void 0 : _drawerProps$getConta.call(drawerProps);\n      }\n\n      if (typeof (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) === 'string') {\n        return document.getElementById(drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer);\n      }\n\n      return drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer;\n    }\n\n    return context === null || context === void 0 ? void 0 : (_context$getPopupCont = context.getPopupContainer) === null || _context$getPopupCont === void 0 ? void 0 : _context$getPopupCont.call(context, document.body); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [context, drawerProps, visible]);\n\n  var _useState = useState(function () {\n    if (typeof window === 'undefined') return undefined;\n    return new ScrollLocker({\n      container: renderDom || document.body\n    });\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      scrollLocker = _useState2[0];\n\n  noteOnce( // eslint-disable-next-line @typescript-eslint/dot-notation\n  !rest['footer'] || !(drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.footer), 'DrawerForm 是一个 ProForm 的特殊布局，如果想自定义按钮，请使用 submit.render 自定义。');\n  useEffect(function () {\n    if (visible) {\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.lock();\n    } else {\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n    }\n\n    if (visible && rest.visible) {\n      onVisibleChange === null || onVisibleChange === void 0 ? void 0 : onVisibleChange(true);\n    } // 如果打开了窗口，并且是用户设置的 visible，就触发一下重新更新\n\n\n    if (visible && rest.visible && (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose)) {\n      setKey(key + 1);\n    }\n\n    return function () {\n      var _scrollLocker$unLock;\n\n      if (!visible) scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock = scrollLocker.unLock) === null || _scrollLocker$unLock === void 0 ? void 0 : _scrollLocker$unLock.call(scrollLocker);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visible]);\n  /** 设置 trigger 的情况下，懒渲染优化性能；使之可以直接配合表格操作等场景使用 */\n\n  var isFirstRender = useRef(!(drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.forceRender));\n  /**\n   * IsFirstRender.current 或者 visible 为 true 的时候就渲染 不渲染能会造成一些问题,比如再次打开值不对了 只有手动配置\n   * drawerProps?.destroyOnClose 为 true 的时候才会每次关闭的时候删除 dom\n   */\n\n  var shouldRenderFormItems = useMemo(function () {\n    if (isFirstRender.current && visible === false) {\n      return false;\n    }\n\n    if (visible === false && (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose)) {\n      return false;\n    }\n\n    return true;\n  }, [visible, drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose]);\n  /** 同步 props 和 本地 */\n\n  var formRef = useRef();\n  /** 如果 destroyOnClose ，重置一下表单 */\n\n  useEffect(function () {\n    if (visible) {\n      isFirstRender.current = false;\n    }\n  }, [drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose, visible]);\n  useEffect(function () {\n    return function () {\n      var _scrollLocker$unLock2;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock2 = scrollLocker.unLock) === null || _scrollLocker$unLock2 === void 0 ? void 0 : _scrollLocker$unLock2.call(scrollLocker);\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  useImperativeHandle(rest.formRef, function () {\n    return formRef.current;\n  });\n  var formDom = /*#__PURE__*/React.createElement(\"div\", {\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    }\n  }, /*#__PURE__*/React.createElement(BaseForm, _extends({\n    formComponentType: \"DrawerForm\",\n    layout: \"vertical\",\n    key: key\n  }, omit(rest, ['visible']), {\n    formRef: formRef,\n    submitter: rest.submitter === false ? false : _objectSpread(_objectSpread({}, rest.submitter), {}, {\n      searchConfig: _objectSpread({\n        submitText: '确认',\n        resetText: '取消'\n      }, (_rest$submitter = rest.submitter) === null || _rest$submitter === void 0 ? void 0 : _rest$submitter.searchConfig),\n      resetButtonProps: _objectSpread({\n        preventDefault: true,\n        onClick: function onClick(e) {\n          var _drawerProps$onClose;\n\n          setVisible(false);\n          drawerProps === null || drawerProps === void 0 ? void 0 : (_drawerProps$onClose = drawerProps.onClose) === null || _drawerProps$onClose === void 0 ? void 0 : _drawerProps$onClose.call(drawerProps, e);\n        }\n      }, (_rest$submitter2 = rest.submitter) === null || _rest$submitter2 === void 0 ? void 0 : _rest$submitter2.resetButtonProps)\n    }),\n    onFinish: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (onFinish) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.next = 4;\n                return onFinish(values);\n\n              case 4:\n                success = _context.sent;\n\n                if (success) {\n                  setVisible(false);\n                  setTimeout(function () {\n                    var _formRef$current;\n\n                    if (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose) (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n                  }, 300);\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    contentRender: function contentRender(item, submitter) {\n      return /*#__PURE__*/React.createElement(_Drawer, _extends({\n        title: title,\n        width: width || 800\n      }, drawerProps, {\n        getContainer: false,\n        visible: visible,\n        onClose: function onClose(e) {\n          var _drawerProps$onClose2;\n\n          setVisible(false);\n          drawerProps === null || drawerProps === void 0 ? void 0 : (_drawerProps$onClose2 = drawerProps.onClose) === null || _drawerProps$onClose2 === void 0 ? void 0 : _drawerProps$onClose2.call(drawerProps, e);\n        },\n        footer: !!submitter && /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end'\n          }\n        }, submitter)\n      }), shouldRenderFormItems ? item : null);\n    }\n  }), children));\n  /** 这个是为了支持 ssr */\n\n  var portalRenderDom = useMemo(function () {\n    if (typeof window === 'undefined') return undefined;\n    return renderDom || document.body;\n  }, [renderDom]);\n  /** 不放到 body 上会导致 z-index 的问题 遮罩什么的都遮不住了 */\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, renderDom !== false && portalRenderDom ? /*#__PURE__*/createPortal(formDom, portalRenderDom) : formDom, trigger && /*#__PURE__*/React.cloneElement(trigger, _objectSpread(_objectSpread({}, trigger.props), {}, {\n    onClick: function () {\n      var _onClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n        var _trigger$props, _trigger$props$onClic;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!visible && (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return setKey(key + 1);\n\n              case 3:\n                setVisible(!visible);\n                (_trigger$props = trigger.props) === null || _trigger$props === void 0 ? void 0 : (_trigger$props$onClic = _trigger$props.onClick) === null || _trigger$props$onClic === void 0 ? void 0 : _trigger$props$onClic.call(_trigger$props, e);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function onClick(_x2) {\n        return _onClick.apply(this, arguments);\n      }\n\n      return onClick;\n    }()\n  })));\n}\n\nexport default DrawerForm;","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/layouts/DrawerForm/index.js"],"names":["_Drawer","_extends","_regeneratorRuntime","_asyncToGenerator","_objectSpread","_ConfigProvider","_slicedToArray","_objectWithoutProperties","_excluded","React","useContext","useEffect","useMemo","useImperativeHandle","useRef","useState","useMergedState","createPortal","omit","BaseForm","noteOnce","ScrollLocker","DrawerForm","_ref","_rest$submitter","_rest$submitter2","children","trigger","onVisibleChange","drawerProps","onFinish","title","width","rest","_useMergedState","visible","value","onChange","_useMergedState2","setVisible","_useMergedState3","_useMergedState4","key","setKey","context","ConfigContext","renderDom","_context$getPopupCont","getContainer","_drawerProps$getConta","call","document","getElementById","getPopupContainer","body","_useState","window","undefined","container","_useState2","scrollLocker","footer","lock","unLock","destroyOnClose","_scrollLocker$unLock","isFirstRender","forceRender","shouldRenderFormItems","current","formRef","_scrollLocker$unLock2","formDom","createElement","onClick","e","stopPropagation","formComponentType","layout","submitter","searchConfig","submitText","resetText","resetButtonProps","preventDefault","_drawerProps$onClose","onClose","_ref2","mark","_callee","values","success","wrap","_callee$","_context","prev","next","abrupt","sent","setTimeout","_formRef$current","resetFields","stop","_x","apply","arguments","contentRender","item","_drawerProps$onClose2","style","display","justifyContent","portalRenderDom","Fragment","cloneElement","props","_onClick","_callee2","_trigger$props","_trigger$props$onClic","_callee2$","_context2","_x2"],"mappings":"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","sourcesContent":["import \"antd/es/drawer/style\";\nimport _Drawer from \"antd/es/drawer\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\", \"trigger\", \"onVisibleChange\", \"drawerProps\", \"onFinish\", \"title\", \"width\"];\nimport React, { useContext, useEffect, useMemo, useImperativeHandle, useRef, useState } from 'react';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport { createPortal } from 'react-dom';\nimport omit from 'omit.js';\nimport BaseForm from '../../BaseForm';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport ScrollLocker from \"rc-util/es/Dom/scrollLocker\";\n\nfunction DrawerForm(_ref) {\n  var _rest$submitter, _rest$submitter2;\n\n  var children = _ref.children,\n      trigger = _ref.trigger,\n      onVisibleChange = _ref.onVisibleChange,\n      drawerProps = _ref.drawerProps,\n      onFinish = _ref.onFinish,\n      title = _ref.title,\n      width = _ref.width,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var _useMergedState = useMergedState(!!rest.visible, {\n    value: rest.visible,\n    onChange: onVisibleChange\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(0),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      key = _useMergedState4[0],\n      setKey = _useMergedState4[1];\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var renderDom = useMemo(function () {\n    var _context$getPopupCont;\n\n    if ((drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) === false) {\n      return false;\n    }\n\n    if (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) {\n      if (typeof (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) === 'function') {\n        var _drawerProps$getConta;\n\n        return drawerProps === null || drawerProps === void 0 ? void 0 : (_drawerProps$getConta = drawerProps.getContainer) === null || _drawerProps$getConta === void 0 ? void 0 : _drawerProps$getConta.call(drawerProps);\n      }\n\n      if (typeof (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer) === 'string') {\n        return document.getElementById(drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer);\n      }\n\n      return drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.getContainer;\n    }\n\n    return context === null || context === void 0 ? void 0 : (_context$getPopupCont = context.getPopupContainer) === null || _context$getPopupCont === void 0 ? void 0 : _context$getPopupCont.call(context, document.body); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [context, drawerProps, visible]);\n\n  var _useState = useState(function () {\n    if (typeof window === 'undefined') return undefined;\n    return new ScrollLocker({\n      container: renderDom || document.body\n    });\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      scrollLocker = _useState2[0];\n\n  noteOnce( // eslint-disable-next-line @typescript-eslint/dot-notation\n  !rest['footer'] || !(drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.footer), 'DrawerForm 是一个 ProForm 的特殊布局，如果想自定义按钮，请使用 submit.render 自定义。');\n  useEffect(function () {\n    if (visible) {\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.lock();\n    } else {\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n    }\n\n    if (visible && rest.visible) {\n      onVisibleChange === null || onVisibleChange === void 0 ? void 0 : onVisibleChange(true);\n    } // 如果打开了窗口，并且是用户设置的 visible，就触发一下重新更新\n\n\n    if (visible && rest.visible && (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose)) {\n      setKey(key + 1);\n    }\n\n    return function () {\n      var _scrollLocker$unLock;\n\n      if (!visible) scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock = scrollLocker.unLock) === null || _scrollLocker$unLock === void 0 ? void 0 : _scrollLocker$unLock.call(scrollLocker);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visible]);\n  /** 设置 trigger 的情况下，懒渲染优化性能；使之可以直接配合表格操作等场景使用 */\n\n  var isFirstRender = useRef(!(drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.forceRender));\n  /**\n   * IsFirstRender.current 或者 visible 为 true 的时候就渲染 不渲染能会造成一些问题,比如再次打开值不对了 只有手动配置\n   * drawerProps?.destroyOnClose 为 true 的时候才会每次关闭的时候删除 dom\n   */\n\n  var shouldRenderFormItems = useMemo(function () {\n    if (isFirstRender.current && visible === false) {\n      return false;\n    }\n\n    if (visible === false && (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose)) {\n      return false;\n    }\n\n    return true;\n  }, [visible, drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose]);\n  /** 同步 props 和 本地 */\n\n  var formRef = useRef();\n  /** 如果 destroyOnClose ，重置一下表单 */\n\n  useEffect(function () {\n    if (visible) {\n      isFirstRender.current = false;\n    }\n  }, [drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose, visible]);\n  useEffect(function () {\n    return function () {\n      var _scrollLocker$unLock2;\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : (_scrollLocker$unLock2 = scrollLocker.unLock) === null || _scrollLocker$unLock2 === void 0 ? void 0 : _scrollLocker$unLock2.call(scrollLocker);\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  useImperativeHandle(rest.formRef, function () {\n    return formRef.current;\n  });\n  var formDom = /*#__PURE__*/React.createElement(\"div\", {\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    }\n  }, /*#__PURE__*/React.createElement(BaseForm, _extends({\n    formComponentType: \"DrawerForm\",\n    layout: \"vertical\",\n    key: key\n  }, omit(rest, ['visible']), {\n    formRef: formRef,\n    submitter: rest.submitter === false ? false : _objectSpread(_objectSpread({}, rest.submitter), {}, {\n      searchConfig: _objectSpread({\n        submitText: '确认',\n        resetText: '取消'\n      }, (_rest$submitter = rest.submitter) === null || _rest$submitter === void 0 ? void 0 : _rest$submitter.searchConfig),\n      resetButtonProps: _objectSpread({\n        preventDefault: true,\n        onClick: function onClick(e) {\n          var _drawerProps$onClose;\n\n          setVisible(false);\n          drawerProps === null || drawerProps === void 0 ? void 0 : (_drawerProps$onClose = drawerProps.onClose) === null || _drawerProps$onClose === void 0 ? void 0 : _drawerProps$onClose.call(drawerProps, e);\n        }\n      }, (_rest$submitter2 = rest.submitter) === null || _rest$submitter2 === void 0 ? void 0 : _rest$submitter2.resetButtonProps)\n    }),\n    onFinish: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (onFinish) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.next = 4;\n                return onFinish(values);\n\n              case 4:\n                success = _context.sent;\n\n                if (success) {\n                  setVisible(false);\n                  setTimeout(function () {\n                    var _formRef$current;\n\n                    if (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose) (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n                  }, 300);\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    contentRender: function contentRender(item, submitter) {\n      return /*#__PURE__*/React.createElement(_Drawer, _extends({\n        title: title,\n        width: width || 800\n      }, drawerProps, {\n        getContainer: false,\n        visible: visible,\n        onClose: function onClose(e) {\n          var _drawerProps$onClose2;\n\n          setVisible(false);\n          drawerProps === null || drawerProps === void 0 ? void 0 : (_drawerProps$onClose2 = drawerProps.onClose) === null || _drawerProps$onClose2 === void 0 ? void 0 : _drawerProps$onClose2.call(drawerProps, e);\n        },\n        footer: !!submitter && /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end'\n          }\n        }, submitter)\n      }), shouldRenderFormItems ? item : null);\n    }\n  }), children));\n  /** 这个是为了支持 ssr */\n\n  var portalRenderDom = useMemo(function () {\n    if (typeof window === 'undefined') return undefined;\n    return renderDom || document.body;\n  }, [renderDom]);\n  /** 不放到 body 上会导致 z-index 的问题 遮罩什么的都遮不住了 */\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, renderDom !== false && portalRenderDom ? /*#__PURE__*/createPortal(formDom, portalRenderDom) : formDom, trigger && /*#__PURE__*/React.cloneElement(trigger, _objectSpread(_objectSpread({}, trigger.props), {}, {\n    onClick: function () {\n      var _onClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n        var _trigger$props, _trigger$props$onClic;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!visible && (drawerProps === null || drawerProps === void 0 ? void 0 : drawerProps.destroyOnClose))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return setKey(key + 1);\n\n              case 3:\n                setVisible(!visible);\n                (_trigger$props = trigger.props) === null || _trigger$props === void 0 ? void 0 : (_trigger$props$onClic = _trigger$props.onClick) === null || _trigger$props$onClic === void 0 ? void 0 : _trigger$props$onClic.call(_trigger$props, e);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function onClick(_x2) {\n        return _onClick.apply(this, arguments);\n      }\n\n      return onClick;\n    }()\n  })));\n}\n\nexport default DrawerForm;"]},"metadata":{},"sourceType":"module"}