{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/divider/style\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"collapsed\", \"layout\", \"defaultCollapsed\", \"defaultColsNumber\", \"span\", \"searchText\", \"resetText\", \"optionRender\", \"collapseRender\", \"onReset\", \"onCollapse\", \"labelWidth\", \"style\", \"split\", \"preserve\", \"ignoreRules\"];\nimport { useContext } from 'react';\nimport React, { useMemo } from 'react';\nimport RcResizeObserver from 'rc-resize-observer';\nimport { useIntl } from '@ant-design/pro-provider';\nimport { isBrowser, useMountMergeState } from '@ant-design/pro-utils';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport BaseForm from '../../BaseForm';\nimport Actions from './Actions';\nimport classNames from 'classnames';\nimport './index.less';\nvar CONFIG_SPAN_BREAKPOINTS = {\n  xs: 513,\n  sm: 513,\n  md: 785,\n  lg: 992,\n  xl: 1057,\n  xxl: Infinity\n};\n/** 配置表单列变化的容器宽度断点 */\n\nvar BREAKPOINTS = {\n  vertical: [// [breakpoint, cols, layout]\n  [513, 1, 'vertical'], [785, 2, 'vertical'], [1057, 3, 'vertical'], [Infinity, 4, 'vertical']],\n  default: [[513, 1, 'vertical'], [701, 2, 'vertical'], [1062, 3, 'horizontal'], [1352, 3, 'horizontal'], [Infinity, 4, 'horizontal']]\n};\n/**\n * 合并用户和默认的配置\n *\n * @param layout\n * @param width\n */\n\nvar getSpanConfig = function getSpanConfig(layout, width, span) {\n  if (span && typeof span === 'number') {\n    return {\n      span: span,\n      layout: layout\n    };\n  }\n\n  var spanConfig = span ? Object.keys(span).map(function (key) {\n    return [CONFIG_SPAN_BREAKPOINTS[key], 24 / span[key], 'horizontal'];\n  }) : BREAKPOINTS[layout || 'default'];\n  var breakPoint = (spanConfig || BREAKPOINTS.default).find(function (item) {\n    return width < item[0] + 16;\n  });\n  return {\n    span: 24 / breakPoint[1],\n    layout: breakPoint[2]\n  };\n};\n\nvar flatMapItems = function flatMapItems(items, ignoreRules) {\n  return items.flatMap(function (item) {\n    var _item$props;\n\n    if ((item === null || item === void 0 ? void 0 : item.type.displayName) === 'ProForm-Group' && !((_item$props = item.props) === null || _item$props === void 0 ? void 0 : _item$props.title)) {\n      return item.props.children;\n    }\n\n    if (ignoreRules && /*#__PURE__*/React.isValidElement(item)) {\n      var _item$props2;\n\n      return /*#__PURE__*/React.cloneElement(item, _objectSpread(_objectSpread({}, item.props), {}, {\n        formItemProps: _objectSpread(_objectSpread({}, (_item$props2 = item.props) === null || _item$props2 === void 0 ? void 0 : _item$props2.formItemProps), {}, {\n          rules: []\n        })\n      }));\n    }\n\n    return item;\n  });\n};\n\nvar QueryFilterContent = function QueryFilterContent(props) {\n  var intl = useIntl();\n  var resetText = props.resetText || intl.getMessage('tableForm.reset', '重置');\n  var searchText = props.searchText || intl.getMessage('tableForm.search', '搜索');\n\n  var _useMergedState = useMergedState(function () {\n    return props.defaultCollapsed && !!props.submitter;\n  }, {\n    value: props.collapsed,\n    onChange: props.onCollapse\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      collapsed = _useMergedState2[0],\n      setCollapsed = _useMergedState2[1];\n\n  var optionRender = props.optionRender,\n      collapseRender = props.collapseRender,\n      split = props.split,\n      items = props.items,\n      spanSize = props.spanSize,\n      showLength = props.showLength;\n  var submitter = useMemo(function () {\n    if (!props.submitter || optionRender === false) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.cloneElement(props.submitter, _objectSpread({\n      searchConfig: {\n        resetText: resetText,\n        submitText: searchText\n      },\n      render: optionRender ? function (_, dom) {\n        return optionRender(_objectSpread(_objectSpread({}, props), {}, {\n          resetText: resetText,\n          searchText: searchText\n        }), props, dom);\n      } : optionRender\n    }, props.submitter.props));\n  }, [props, resetText, searchText, optionRender]); // totalSpan 统计控件占的位置，计算 offset 保证查询按钮在最后一列\n\n  var totalSpan = 0;\n  var itemLength = 0; // for split compute\n\n  var currentSpan = 0;\n  var doms = flatMapItems(items, props.ignoreRules).map(function (item, index) {\n    var _item$props3, _item$props4, _item$props5; // 如果 formItem 自己配置了 hidden，默认使用它自己的\n\n\n    var colSize = /*#__PURE__*/React.isValidElement(item) ? item === null || item === void 0 ? void 0 : (_item$props3 = item.props) === null || _item$props3 === void 0 ? void 0 : _item$props3.colSize : 1;\n    var colSpan = Math.min(spanSize.span * (colSize || 1), 24); // 计算总的 totalSpan 长度\n\n    totalSpan += colSpan;\n    var hidden = (item === null || item === void 0 ? void 0 : (_item$props4 = item.props) === null || _item$props4 === void 0 ? void 0 : _item$props4.hidden) || // 如果收起了\n    collapsed && // 如果 超过显示长度 且 总长度超过了 24\n    index >= showLength - 1 && !!index && totalSpan >= 24;\n    itemLength += 1; // 每一列的key, 一般是存在的\n\n    var itemKey = /*#__PURE__*/React.isValidElement(item) && (item.key || \"\".concat((_item$props5 = item.props) === null || _item$props5 === void 0 ? void 0 : _item$props5.name)) || index;\n\n    if ( /*#__PURE__*/React.isValidElement(item) && hidden) {\n      if (!props.preserve) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.cloneElement(item, {\n        hidden: true,\n        key: itemKey || index\n      });\n    }\n\n    if (24 - currentSpan % 24 < colSpan) {\n      // 如果当前行空余位置放不下，那么折行\n      totalSpan += 24 - currentSpan % 24;\n      currentSpan += 24 - currentSpan % 24;\n    }\n\n    currentSpan += colSpan;\n    var colItem = /*#__PURE__*/React.createElement(_Col, {\n      key: itemKey,\n      span: colSpan\n    }, item);\n\n    if (split && currentSpan % 24 === 0 && index < itemLength - 1) {\n      return [colItem, /*#__PURE__*/React.createElement(_Col, {\n        span: \"24\",\n        key: \"line\"\n      }, /*#__PURE__*/React.createElement(_Divider, {\n        style: {\n          marginTop: -8,\n          marginBottom: 16\n        },\n        dashed: true\n      }))];\n    }\n\n    return colItem;\n  });\n  /** 是否需要展示 collapseRender */\n\n  var needCollapseRender = useMemo(function () {\n    if (totalSpan < 24 || itemLength < showLength) {\n      return false;\n    }\n\n    return true;\n  }, [itemLength, showLength, totalSpan]);\n  var offset = useMemo(function () {\n    var offsetSpan = currentSpan % 24 + spanSize.span;\n    return 24 - offsetSpan;\n  }, [currentSpan, spanSize.span]);\n  return /*#__PURE__*/React.createElement(_Row, {\n    gutter: 24,\n    justify: \"start\",\n    key: \"resize-observer-row\"\n  }, doms, submitter && /*#__PURE__*/React.createElement(_Col, {\n    key: \"submitter\",\n    span: spanSize.span,\n    offset: offset,\n    style: {\n      textAlign: 'right'\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \" \",\n    colon: false,\n    className: \"pro-form-query-filter-actions\"\n  }, /*#__PURE__*/React.createElement(Actions, {\n    key: \"pro-form-query-filter-actions\",\n    collapsed: collapsed,\n    collapseRender: needCollapseRender ? collapseRender : false,\n    submitter: submitter,\n    setCollapsed: setCollapsed\n  }))));\n};\n\nvar defaultWidth = isBrowser() ? document.body.clientWidth : 1024;\n\nfunction QueryFilter(props) {\n  var controlCollapsed = props.collapsed,\n      layout = props.layout,\n      _props$defaultCollaps = props.defaultCollapsed,\n      defaultCollapsed = _props$defaultCollaps === void 0 ? true : _props$defaultCollaps,\n      defaultColsNumber = props.defaultColsNumber,\n      span = props.span,\n      searchText = props.searchText,\n      resetText = props.resetText,\n      optionRender = props.optionRender,\n      collapseRender = props.collapseRender,\n      onReset = props.onReset,\n      onCollapse = props.onCollapse,\n      _props$labelWidth = props.labelWidth,\n      labelWidth = _props$labelWidth === void 0 ? '80' : _props$labelWidth,\n      style = props.style,\n      split = props.split,\n      _props$preserve = props.preserve,\n      preserve = _props$preserve === void 0 ? true : _props$preserve,\n      ignoreRules = props.ignoreRules,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var baseClassName = context.getPrefixCls('pro-form-query-filter');\n\n  var _useMountMergeState = useMountMergeState(function () {\n    return typeof (style === null || style === void 0 ? void 0 : style.width) === 'number' ? style === null || style === void 0 ? void 0 : style.width : defaultWidth;\n  }),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      width = _useMountMergeState2[0],\n      setWidth = _useMountMergeState2[1];\n\n  var spanSize = useMemo(function () {\n    return getSpanConfig(layout, width + 16, span);\n  }, [layout, width, span]);\n  var showLength = useMemo(function () {\n    if (defaultColsNumber !== undefined) {\n      return defaultColsNumber;\n    }\n\n    return Math.max(1, 24 / spanSize.span);\n  }, [defaultColsNumber, spanSize.span]);\n  /** 计算最大宽度防止溢出换行 */\n\n  var formItemFixStyle = useMemo(function () {\n    if (labelWidth && spanSize.layout !== 'vertical' && labelWidth !== 'auto') {\n      return {\n        labelCol: {\n          flex: \"0 0 \".concat(labelWidth, \"px\")\n        },\n        wrapperCol: {\n          style: {\n            maxWidth: \"calc(100% - \".concat(labelWidth, \"px)\")\n          }\n        },\n        style: {\n          flexWrap: 'nowrap'\n        }\n      };\n    }\n\n    return undefined;\n  }, [spanSize.layout, labelWidth]);\n  return /*#__PURE__*/React.createElement(RcResizeObserver, {\n    key: \"resize-observer\",\n    onResize: function onResize(offset) {\n      if (width !== offset.width && offset.width > 17) {\n        setWidth(offset.width);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(BaseForm, _extends({\n    isKeyPressSubmit: true,\n    preserve: preserve\n  }, rest, {\n    className: classNames(baseClassName, rest.className),\n    onReset: onReset,\n    style: style,\n    layout: spanSize.layout,\n    fieldProps: {\n      style: {\n        width: '100%'\n      }\n    },\n    formItemProps: formItemFixStyle,\n    groupProps: {\n      titleStyle: {\n        display: 'inline-block',\n        marginRight: 16\n      }\n    },\n    contentRender: function contentRender(items, renderSubmitter, form) {\n      return /*#__PURE__*/React.createElement(QueryFilterContent, {\n        spanSize: spanSize,\n        collapsed: controlCollapsed,\n        form: form,\n        collapseRender: collapseRender,\n        defaultCollapsed: defaultCollapsed,\n        onCollapse: onCollapse,\n        optionRender: optionRender,\n        submitter: renderSubmitter,\n        items: items,\n        split: split,\n        resetText: props.resetText,\n        searchText: props.searchText,\n        preserve: preserve,\n        ignoreRules: ignoreRules,\n        showLength: showLength\n      });\n    }\n  })));\n}\n\nexport default QueryFilter;","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/layouts/QueryFilter/index.js"],"names":["_extends","_ConfigProvider","_objectWithoutProperties","_Row","_Form","_Divider","_Col","_slicedToArray","_objectSpread","_excluded","useContext","React","useMemo","RcResizeObserver","useIntl","isBrowser","useMountMergeState","useMergedState","BaseForm","Actions","classNames","CONFIG_SPAN_BREAKPOINTS","xs","sm","md","lg","xl","xxl","Infinity","BREAKPOINTS","vertical","default","getSpanConfig","layout","width","span","spanConfig","Object","keys","map","key","breakPoint","find","item","flatMapItems","items","ignoreRules","flatMap","_item$props","type","displayName","props","title","children","isValidElement","_item$props2","cloneElement","formItemProps","rules","QueryFilterContent","intl","resetText","getMessage","searchText","_useMergedState","defaultCollapsed","submitter","value","collapsed","onChange","onCollapse","_useMergedState2","setCollapsed","optionRender","collapseRender","split","spanSize","showLength","searchConfig","submitText","render","_","dom","totalSpan","itemLength","currentSpan","doms","index","_item$props3","_item$props4","_item$props5","colSize","colSpan","Math","min","hidden","itemKey","concat","name","preserve","colItem","createElement","style","marginTop","marginBottom","dashed","needCollapseRender","offset","offsetSpan","gutter","justify","textAlign","Item","label","colon","className","defaultWidth","document","body","clientWidth","QueryFilter","controlCollapsed","_props$defaultCollaps","defaultColsNumber","onReset","_props$labelWidth","labelWidth","_props$preserve","rest","context","ConfigContext","baseClassName","getPrefixCls","_useMountMergeState","_useMountMergeState2","setWidth","undefined","max","formItemFixStyle","labelCol","flex","wrapperCol","maxWidth","flexWrap","onResize","isKeyPressSubmit","fieldProps","groupProps","titleStyle","display","marginRight","contentRender","renderSubmitter","form"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/divider/style\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"collapsed\", \"layout\", \"defaultCollapsed\", \"defaultColsNumber\", \"span\", \"searchText\", \"resetText\", \"optionRender\", \"collapseRender\", \"onReset\", \"onCollapse\", \"labelWidth\", \"style\", \"split\", \"preserve\", \"ignoreRules\"];\nimport { useContext } from 'react';\nimport React, { useMemo } from 'react';\nimport RcResizeObserver from 'rc-resize-observer';\nimport { useIntl } from '@ant-design/pro-provider';\nimport { isBrowser, useMountMergeState } from '@ant-design/pro-utils';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport BaseForm from '../../BaseForm';\nimport Actions from './Actions';\nimport classNames from 'classnames';\nimport './index.less';\nvar CONFIG_SPAN_BREAKPOINTS = {\n  xs: 513,\n  sm: 513,\n  md: 785,\n  lg: 992,\n  xl: 1057,\n  xxl: Infinity\n};\n/** 配置表单列变化的容器宽度断点 */\n\nvar BREAKPOINTS = {\n  vertical: [// [breakpoint, cols, layout]\n  [513, 1, 'vertical'], [785, 2, 'vertical'], [1057, 3, 'vertical'], [Infinity, 4, 'vertical']],\n  default: [[513, 1, 'vertical'], [701, 2, 'vertical'], [1062, 3, 'horizontal'], [1352, 3, 'horizontal'], [Infinity, 4, 'horizontal']]\n};\n/**\n * 合并用户和默认的配置\n *\n * @param layout\n * @param width\n */\n\nvar getSpanConfig = function getSpanConfig(layout, width, span) {\n  if (span && typeof span === 'number') {\n    return {\n      span: span,\n      layout: layout\n    };\n  }\n\n  var spanConfig = span ? Object.keys(span).map(function (key) {\n    return [CONFIG_SPAN_BREAKPOINTS[key], 24 / span[key], 'horizontal'];\n  }) : BREAKPOINTS[layout || 'default'];\n  var breakPoint = (spanConfig || BREAKPOINTS.default).find(function (item) {\n    return width < item[0] + 16;\n  });\n  return {\n    span: 24 / breakPoint[1],\n    layout: breakPoint[2]\n  };\n};\n\nvar flatMapItems = function flatMapItems(items, ignoreRules) {\n  return items.flatMap(function (item) {\n    var _item$props;\n\n    if ((item === null || item === void 0 ? void 0 : item.type.displayName) === 'ProForm-Group' && !((_item$props = item.props) === null || _item$props === void 0 ? void 0 : _item$props.title)) {\n      return item.props.children;\n    }\n\n    if (ignoreRules && /*#__PURE__*/React.isValidElement(item)) {\n      var _item$props2;\n\n      return /*#__PURE__*/React.cloneElement(item, _objectSpread(_objectSpread({}, item.props), {}, {\n        formItemProps: _objectSpread(_objectSpread({}, (_item$props2 = item.props) === null || _item$props2 === void 0 ? void 0 : _item$props2.formItemProps), {}, {\n          rules: []\n        })\n      }));\n    }\n\n    return item;\n  });\n};\n\nvar QueryFilterContent = function QueryFilterContent(props) {\n  var intl = useIntl();\n  var resetText = props.resetText || intl.getMessage('tableForm.reset', '重置');\n  var searchText = props.searchText || intl.getMessage('tableForm.search', '搜索');\n\n  var _useMergedState = useMergedState(function () {\n    return props.defaultCollapsed && !!props.submitter;\n  }, {\n    value: props.collapsed,\n    onChange: props.onCollapse\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      collapsed = _useMergedState2[0],\n      setCollapsed = _useMergedState2[1];\n\n  var optionRender = props.optionRender,\n      collapseRender = props.collapseRender,\n      split = props.split,\n      items = props.items,\n      spanSize = props.spanSize,\n      showLength = props.showLength;\n  var submitter = useMemo(function () {\n    if (!props.submitter || optionRender === false) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.cloneElement(props.submitter, _objectSpread({\n      searchConfig: {\n        resetText: resetText,\n        submitText: searchText\n      },\n      render: optionRender ? function (_, dom) {\n        return optionRender(_objectSpread(_objectSpread({}, props), {}, {\n          resetText: resetText,\n          searchText: searchText\n        }), props, dom);\n      } : optionRender\n    }, props.submitter.props));\n  }, [props, resetText, searchText, optionRender]); // totalSpan 统计控件占的位置，计算 offset 保证查询按钮在最后一列\n\n  var totalSpan = 0;\n  var itemLength = 0; // for split compute\n\n  var currentSpan = 0;\n  var doms = flatMapItems(items, props.ignoreRules).map(function (item, index) {\n    var _item$props3, _item$props4, _item$props5;\n\n    // 如果 formItem 自己配置了 hidden，默认使用它自己的\n    var colSize = /*#__PURE__*/React.isValidElement(item) ? item === null || item === void 0 ? void 0 : (_item$props3 = item.props) === null || _item$props3 === void 0 ? void 0 : _item$props3.colSize : 1;\n    var colSpan = Math.min(spanSize.span * (colSize || 1), 24); // 计算总的 totalSpan 长度\n\n    totalSpan += colSpan;\n    var hidden = (item === null || item === void 0 ? void 0 : (_item$props4 = item.props) === null || _item$props4 === void 0 ? void 0 : _item$props4.hidden) || // 如果收起了\n    collapsed && // 如果 超过显示长度 且 总长度超过了 24\n    index >= showLength - 1 && !!index && totalSpan >= 24;\n    itemLength += 1; // 每一列的key, 一般是存在的\n\n    var itemKey = /*#__PURE__*/React.isValidElement(item) && (item.key || \"\".concat((_item$props5 = item.props) === null || _item$props5 === void 0 ? void 0 : _item$props5.name)) || index;\n\n    if ( /*#__PURE__*/React.isValidElement(item) && hidden) {\n      if (!props.preserve) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.cloneElement(item, {\n        hidden: true,\n        key: itemKey || index\n      });\n    }\n\n    if (24 - currentSpan % 24 < colSpan) {\n      // 如果当前行空余位置放不下，那么折行\n      totalSpan += 24 - currentSpan % 24;\n      currentSpan += 24 - currentSpan % 24;\n    }\n\n    currentSpan += colSpan;\n    var colItem = /*#__PURE__*/React.createElement(_Col, {\n      key: itemKey,\n      span: colSpan\n    }, item);\n\n    if (split && currentSpan % 24 === 0 && index < itemLength - 1) {\n      return [colItem, /*#__PURE__*/React.createElement(_Col, {\n        span: \"24\",\n        key: \"line\"\n      }, /*#__PURE__*/React.createElement(_Divider, {\n        style: {\n          marginTop: -8,\n          marginBottom: 16\n        },\n        dashed: true\n      }))];\n    }\n\n    return colItem;\n  });\n  /** 是否需要展示 collapseRender */\n\n  var needCollapseRender = useMemo(function () {\n    if (totalSpan < 24 || itemLength < showLength) {\n      return false;\n    }\n\n    return true;\n  }, [itemLength, showLength, totalSpan]);\n  var offset = useMemo(function () {\n    var offsetSpan = currentSpan % 24 + spanSize.span;\n    return 24 - offsetSpan;\n  }, [currentSpan, spanSize.span]);\n  return /*#__PURE__*/React.createElement(_Row, {\n    gutter: 24,\n    justify: \"start\",\n    key: \"resize-observer-row\"\n  }, doms, submitter && /*#__PURE__*/React.createElement(_Col, {\n    key: \"submitter\",\n    span: spanSize.span,\n    offset: offset,\n    style: {\n      textAlign: 'right'\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \" \",\n    colon: false,\n    className: \"pro-form-query-filter-actions\"\n  }, /*#__PURE__*/React.createElement(Actions, {\n    key: \"pro-form-query-filter-actions\",\n    collapsed: collapsed,\n    collapseRender: needCollapseRender ? collapseRender : false,\n    submitter: submitter,\n    setCollapsed: setCollapsed\n  }))));\n};\n\nvar defaultWidth = isBrowser() ? document.body.clientWidth : 1024;\n\nfunction QueryFilter(props) {\n  var controlCollapsed = props.collapsed,\n      layout = props.layout,\n      _props$defaultCollaps = props.defaultCollapsed,\n      defaultCollapsed = _props$defaultCollaps === void 0 ? true : _props$defaultCollaps,\n      defaultColsNumber = props.defaultColsNumber,\n      span = props.span,\n      searchText = props.searchText,\n      resetText = props.resetText,\n      optionRender = props.optionRender,\n      collapseRender = props.collapseRender,\n      onReset = props.onReset,\n      onCollapse = props.onCollapse,\n      _props$labelWidth = props.labelWidth,\n      labelWidth = _props$labelWidth === void 0 ? '80' : _props$labelWidth,\n      style = props.style,\n      split = props.split,\n      _props$preserve = props.preserve,\n      preserve = _props$preserve === void 0 ? true : _props$preserve,\n      ignoreRules = props.ignoreRules,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var baseClassName = context.getPrefixCls('pro-form-query-filter');\n\n  var _useMountMergeState = useMountMergeState(function () {\n    return typeof (style === null || style === void 0 ? void 0 : style.width) === 'number' ? style === null || style === void 0 ? void 0 : style.width : defaultWidth;\n  }),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      width = _useMountMergeState2[0],\n      setWidth = _useMountMergeState2[1];\n\n  var spanSize = useMemo(function () {\n    return getSpanConfig(layout, width + 16, span);\n  }, [layout, width, span]);\n  var showLength = useMemo(function () {\n    if (defaultColsNumber !== undefined) {\n      return defaultColsNumber;\n    }\n\n    return Math.max(1, 24 / spanSize.span);\n  }, [defaultColsNumber, spanSize.span]);\n  /** 计算最大宽度防止溢出换行 */\n\n  var formItemFixStyle = useMemo(function () {\n    if (labelWidth && spanSize.layout !== 'vertical' && labelWidth !== 'auto') {\n      return {\n        labelCol: {\n          flex: \"0 0 \".concat(labelWidth, \"px\")\n        },\n        wrapperCol: {\n          style: {\n            maxWidth: \"calc(100% - \".concat(labelWidth, \"px)\")\n          }\n        },\n        style: {\n          flexWrap: 'nowrap'\n        }\n      };\n    }\n\n    return undefined;\n  }, [spanSize.layout, labelWidth]);\n  return /*#__PURE__*/React.createElement(RcResizeObserver, {\n    key: \"resize-observer\",\n    onResize: function onResize(offset) {\n      if (width !== offset.width && offset.width > 17) {\n        setWidth(offset.width);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(BaseForm, _extends({\n    isKeyPressSubmit: true,\n    preserve: preserve\n  }, rest, {\n    className: classNames(baseClassName, rest.className),\n    onReset: onReset,\n    style: style,\n    layout: spanSize.layout,\n    fieldProps: {\n      style: {\n        width: '100%'\n      }\n    },\n    formItemProps: formItemFixStyle,\n    groupProps: {\n      titleStyle: {\n        display: 'inline-block',\n        marginRight: 16\n      }\n    },\n    contentRender: function contentRender(items, renderSubmitter, form) {\n      return /*#__PURE__*/React.createElement(QueryFilterContent, {\n        spanSize: spanSize,\n        collapsed: controlCollapsed,\n        form: form,\n        collapseRender: collapseRender,\n        defaultCollapsed: defaultCollapsed,\n        onCollapse: onCollapse,\n        optionRender: optionRender,\n        submitter: renderSubmitter,\n        items: items,\n        split: split,\n        resetText: props.resetText,\n        searchText: props.searchText,\n        preserve: preserve,\n        ignoreRules: ignoreRules,\n        showLength: showLength\n      });\n    }\n  })));\n}\n\nexport default QueryFilter;"]},"metadata":{},"sourceType":"module"}