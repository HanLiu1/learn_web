{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/divider/style\";\nimport _Divider from \"antd/es/divider\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"columns\", \"layoutType\", \"steps\", \"type\", \"action\", \"formRef\"];\n/* eslint-disable react/no-array-index-key */\n\nimport React, { useCallback, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { ProFormFieldSet, ProFormDependency } from '../../index';\nimport { ProFormGroup, ProFormField } from '../../index';\nimport { LabelIconTip, omitUndefined } from '@ant-design/pro-utils';\nimport { runFunction } from '@ant-design/pro-utils';\nimport omit from 'omit.js';\nimport ProForm, { DrawerForm, ModalForm, QueryFilter, LightFilter, StepsForm } from '../../index';\nimport ProFormList from '../List';\nvar FormComments = {\n  DrawerForm: DrawerForm,\n  QueryFilter: QueryFilter,\n  LightFilter: LightFilter,\n  StepForm: StepsForm.StepForm,\n  StepsForm: StepsForm,\n  ModalForm: ModalForm\n};\n\nvar noop = function noop() {};\n/**\n * 此组件可以根据 Json Schema 来生成相应的表单,大部分配置与 antd 的 table 列配置相同\n *\n * @see 此组件仍为 beta 版本，api 可能发生变化\n */\n\n\nfunction BetaSchemaForm(props) {\n  var columns = props.columns,\n      _props$layoutType = props.layoutType,\n      layoutType = _props$layoutType === void 0 ? 'ProForm' : _props$layoutType,\n      _props$steps = props.steps,\n      steps = _props$steps === void 0 ? [] : _props$steps,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'form' : _props$type,\n      action = props.action,\n      propsFormRef = props.formRef,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var Form = FormComments[layoutType] || ProForm;\n  var formRef = useRef(props.form);\n  var refMap = useMemo(function () {\n    var obj = {\n      form: formRef.current\n    };\n    Object.defineProperty(obj, 'form', {\n      get: function get() {\n        return formRef.current || {\n          getFieldValue: noop,\n          getFieldsValue: noop,\n          resetFields: noop,\n          setFieldsValue: noop\n        };\n      }\n    });\n    return obj;\n  }, []);\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      updateTime = _useState2[0],\n      updateFormRender = _useState2[1];\n\n  useImperativeHandle(propsFormRef, function () {\n    return refMap.form;\n  });\n  /**\n   * 生成子项，方便被 table 接入\n   *\n   * @param items\n   */\n\n  var genItems = useCallback(function (items, update) {\n    if (layoutType === 'StepsForm') return [];\n    return items.filter(function (originItem) {\n      if (originItem.hideInForm && type === 'form') {\n        return false;\n      }\n\n      return true;\n    }).sort(function (a, b) {\n      if (b.order || a.order) {\n        return (b.order || 0) - (a.order || 0);\n      }\n\n      return (b.index || 0) - (a.index || 0);\n    }).map(function (originItem, index) {\n      var _item$dataIndex;\n\n      var title = runFunction(originItem.title, originItem, 'form', /*#__PURE__*/React.createElement(LabelIconTip, {\n        label: originItem.title,\n        tooltip: originItem.tooltip || originItem.tip\n      }));\n      var item = omitUndefined({\n        name: originItem.name,\n        valueType: runFunction(originItem.valueType, {}),\n        key: originItem.key,\n        columns: originItem.columns,\n        fieldProps: runFunction(originItem.fieldProps, refMap.form, originItem),\n        valueEnum: originItem.valueEnum,\n        dataIndex: originItem.key || originItem.dataIndex,\n        initialValue: originItem.initialValue,\n        formItemProps: runFunction(originItem.formItemProps, refMap.form, originItem),\n        width: originItem.width,\n        render: originItem.render,\n        renderFormItem: originItem.renderFormItem,\n        index: originItem.index,\n        readonly: originItem.readonly,\n        transform: originItem.transform,\n        colSize: originItem.colSize,\n        className: originItem.className,\n        renderText: originItem.renderText,\n        request: originItem.request,\n        params: originItem.params,\n        tooltip: originItem.tooltip || originItem.tip,\n        title: title,\n        dependencies: originItem.dependencies,\n        proFieldProps: originItem.proFieldProps\n      }); // 几种特殊的 value 不处理\n\n      if (item.valueType && typeof item.valueType === 'string' && ['index', 'indexBorder', 'option'].includes(item === null || item === void 0 ? void 0 : item.valueType)) {\n        return null;\n      }\n\n      var key = item.key || ((_item$dataIndex = item.dataIndex) === null || _item$dataIndex === void 0 ? void 0 : _item$dataIndex.toString()) || index;\n\n      if (item.valueType === 'group') {\n        if (!item.columns || !Array.isArray(item.columns)) return null;\n        return /*#__PURE__*/React.createElement(ProFormGroup, _extends({\n          key: key,\n          label: title\n        }, item.fieldProps), genItems(item.columns));\n      }\n\n      if (item.valueType === 'formList' && item.dataIndex) {\n        if (!item.columns || !Array.isArray(item.columns)) return null;\n        return /*#__PURE__*/React.createElement(ProFormList, _extends({\n          key: key,\n          name: item.dataIndex,\n          label: item.title,\n          initialValue: item.initialValue\n        }, item.fieldProps), genItems(item.columns));\n      }\n\n      if (item.valueType === 'formSet' && item.dataIndex) {\n        if (!item.columns || !Array.isArray(item.columns)) return null;\n        return /*#__PURE__*/React.createElement(ProFormFieldSet, _extends({}, item.formItemProps, {\n          key: key,\n          initialValue: item.initialValue,\n          name: item.dataIndex,\n          label: item.title\n        }, item.fieldProps), genItems(item.columns, update));\n      }\n      /** 分割线 */\n\n\n      if (item.valueType === 'divider') {\n        return /*#__PURE__*/React.createElement(_Divider, _extends({}, item.fieldProps, {\n          key: index\n        }));\n      }\n      /** ProFormDependency */\n\n\n      if (item.valueType === 'dependency') {\n        return /*#__PURE__*/React.createElement(ProFormDependency, _extends({}, item.fieldProps, {\n          key: key\n        }), function (values) {\n          if (!item.columns || typeof item.columns !== 'function') return null;\n          return genItems(item.columns(values));\n        });\n      }\n      /** 公用的 类型 props */\n\n\n      var formFieldProps = _objectSpread(_objectSpread({\n        label: item.title\n      }, omit(item, ['dataIndex', 'width', 'render', 'renderFormItem', 'renderText', 'title'])), {}, {\n        key: key,\n        name: item.dataIndex,\n        width: item.width,\n        formItemProps: item.formItemProps,\n        fieldProps: item.fieldProps,\n        render: (item === null || item === void 0 ? void 0 : item.render) ? function (dom, entity, renderIndex) {\n          var _item$render;\n\n          return item === null || item === void 0 ? void 0 : (_item$render = item.render) === null || _item$render === void 0 ? void 0 : _item$render.call(item, dom, entity, renderIndex, action === null || action === void 0 ? void 0 : action.current, _objectSpread({\n            type: type\n          }, item));\n        } : undefined\n      });\n\n      var defaultRender = function defaultRender() {\n        return /*#__PURE__*/React.createElement(ProFormField, _extends({}, formFieldProps, {\n          ignoreFormItem: true\n        }));\n      };\n\n      if (item === null || item === void 0 ? void 0 : item.renderFormItem) {\n        var _item$renderFormItem;\n\n        var formDom = item === null || item === void 0 ? void 0 : (_item$renderFormItem = item.renderFormItem) === null || _item$renderFormItem === void 0 ? void 0 : _item$renderFormItem.call(item, _objectSpread(_objectSpread({\n          type: type\n        }, item), {}, {\n          originProps: originItem\n        }), _objectSpread(_objectSpread({}, item), {}, {\n          defaultRender: defaultRender,\n          type: type\n        }), refMap.form);\n\n        if (formDom === false || formDom === undefined || formDom === null) {\n          return null;\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(ProFormField, _extends({}, formFieldProps, {\n        // eslint-disable-next-line react/no-array-index-key\n        key: \"\".concat(key, \"-\").concat(index),\n        transform: item.transform,\n        renderFormItem: (item === null || item === void 0 ? void 0 : item.renderFormItem) ? function (_, config) {\n          var _item$renderFormItem2;\n\n          var renderConfig = omitUndefined(_objectSpread(_objectSpread({}, config), {}, {\n            onChange: undefined\n          }));\n          return item === null || item === void 0 ? void 0 : (_item$renderFormItem2 = item.renderFormItem) === null || _item$renderFormItem2 === void 0 ? void 0 : _item$renderFormItem2.call(item, _objectSpread(_objectSpread({\n            type: type\n          }, item), {}, {\n            originProps: originItem\n          }), _objectSpread(_objectSpread({}, renderConfig), {}, {\n            defaultRender: defaultRender,\n            type: type\n          }), refMap.form);\n        } : undefined\n      }));\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [action, layoutType, type]);\n  var needRealUpdate = useMemo(function () {\n    if (layoutType === 'StepsForm') return [];\n    return columns.some(function (item) {\n      return item.renderFormItem || typeof item.fieldProps === 'function' || typeof item.formItemProps === 'function';\n    });\n  }, [columns, layoutType]);\n\n  var getDomList = function getDomList() {\n    return genItems(columns, updateTime);\n  };\n\n  if (layoutType === 'StepsForm') {\n    return /*#__PURE__*/React.createElement(StepsForm, _extends({\n      formRef: formRef\n    }, rest), steps === null || steps === void 0 ? void 0 : steps.map(function (item, index) {\n      return /*#__PURE__*/React.createElement(BetaSchemaForm, _extends({}, item, {\n        key: index,\n        layoutType: \"StepForm\",\n        columns: columns[index]\n      }));\n    }));\n  }\n  /** 如果是行内模式 */\n\n\n  if (layoutType === 'Embed') return /*#__PURE__*/React.createElement(React.Fragment, null, getDomList());\n  return /*#__PURE__*/React.createElement(Form, _extends({\n    formRef: formRef\n  }, rest, {\n    onInit: function onInit() {\n      var _rest$onInit;\n\n      if (needRealUpdate) {\n        updateFormRender(updateTime + 1);\n      }\n\n      for (var _len = arguments.length, restValue = new Array(_len), _key = 0; _key < _len; _key++) {\n        restValue[_key] = arguments[_key];\n      }\n\n      rest === null || rest === void 0 ? void 0 : (_rest$onInit = rest.onInit) === null || _rest$onInit === void 0 ? void 0 : _rest$onInit.call.apply(_rest$onInit, [rest].concat(restValue));\n    },\n    onValuesChange: function onValuesChange() {\n      var _rest$onValuesChange;\n\n      if (needRealUpdate) {\n        updateFormRender(updateTime + 1);\n      }\n\n      for (var _len2 = arguments.length, restValue = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        restValue[_key2] = arguments[_key2];\n      }\n\n      rest === null || rest === void 0 ? void 0 : (_rest$onValuesChange = rest.onValuesChange) === null || _rest$onValuesChange === void 0 ? void 0 : _rest$onValuesChange.call.apply(_rest$onValuesChange, [rest].concat(restValue));\n    }\n  }), getDomList());\n}\n\nexport default BetaSchemaForm;","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/components/SchemaForm/index.js"],"names":["_objectSpread","_Divider","_extends","_slicedToArray","_objectWithoutProperties","_excluded","React","useCallback","useImperativeHandle","useMemo","useRef","useState","ProFormFieldSet","ProFormDependency","ProFormGroup","ProFormField","LabelIconTip","omitUndefined","runFunction","omit","ProForm","DrawerForm","ModalForm","QueryFilter","LightFilter","StepsForm","ProFormList","FormComments","StepForm","noop","BetaSchemaForm","props","columns","_props$layoutType","layoutType","_props$steps","steps","_props$type","type","action","propsFormRef","formRef","rest","Form","form","refMap","obj","current","Object","defineProperty","get","getFieldValue","getFieldsValue","resetFields","setFieldsValue","_useState","_useState2","updateTime","updateFormRender","genItems","items","update","filter","originItem","hideInForm","sort","a","b","order","index","map","_item$dataIndex","title","createElement","label","tooltip","tip","item","name","valueType","key","fieldProps","valueEnum","dataIndex","initialValue","formItemProps","width","render","renderFormItem","readonly","transform","colSize","className","renderText","request","params","dependencies","proFieldProps","includes","toString","Array","isArray","values","formFieldProps","dom","entity","renderIndex","_item$render","call","undefined","defaultRender","ignoreFormItem","_item$renderFormItem","formDom","originProps","concat","_","config","_item$renderFormItem2","renderConfig","onChange","needRealUpdate","some","getDomList","Fragment","onInit","_rest$onInit","_len","arguments","length","restValue","_key","apply","onValuesChange","_rest$onValuesChange","_len2","_key2"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/divider/style\";\nimport _Divider from \"antd/es/divider\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"columns\", \"layoutType\", \"steps\", \"type\", \"action\", \"formRef\"];\n\n/* eslint-disable react/no-array-index-key */\nimport React, { useCallback, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { ProFormFieldSet, ProFormDependency } from '../../index';\nimport { ProFormGroup, ProFormField } from '../../index';\nimport { LabelIconTip, omitUndefined } from '@ant-design/pro-utils';\nimport { runFunction } from '@ant-design/pro-utils';\nimport omit from 'omit.js';\nimport ProForm, { DrawerForm, ModalForm, QueryFilter, LightFilter, StepsForm } from '../../index';\nimport ProFormList from '../List';\nvar FormComments = {\n  DrawerForm: DrawerForm,\n  QueryFilter: QueryFilter,\n  LightFilter: LightFilter,\n  StepForm: StepsForm.StepForm,\n  StepsForm: StepsForm,\n  ModalForm: ModalForm\n};\n\nvar noop = function noop() {};\n/**\n * 此组件可以根据 Json Schema 来生成相应的表单,大部分配置与 antd 的 table 列配置相同\n *\n * @see 此组件仍为 beta 版本，api 可能发生变化\n */\n\n\nfunction BetaSchemaForm(props) {\n  var columns = props.columns,\n      _props$layoutType = props.layoutType,\n      layoutType = _props$layoutType === void 0 ? 'ProForm' : _props$layoutType,\n      _props$steps = props.steps,\n      steps = _props$steps === void 0 ? [] : _props$steps,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'form' : _props$type,\n      action = props.action,\n      propsFormRef = props.formRef,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var Form = FormComments[layoutType] || ProForm;\n  var formRef = useRef(props.form);\n  var refMap = useMemo(function () {\n    var obj = {\n      form: formRef.current\n    };\n    Object.defineProperty(obj, 'form', {\n      get: function get() {\n        return formRef.current || {\n          getFieldValue: noop,\n          getFieldsValue: noop,\n          resetFields: noop,\n          setFieldsValue: noop\n        };\n      }\n    });\n    return obj;\n  }, []);\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      updateTime = _useState2[0],\n      updateFormRender = _useState2[1];\n\n  useImperativeHandle(propsFormRef, function () {\n    return refMap.form;\n  });\n  /**\n   * 生成子项，方便被 table 接入\n   *\n   * @param items\n   */\n\n  var genItems = useCallback(function (items, update) {\n    if (layoutType === 'StepsForm') return [];\n    return items.filter(function (originItem) {\n      if (originItem.hideInForm && type === 'form') {\n        return false;\n      }\n\n      return true;\n    }).sort(function (a, b) {\n      if (b.order || a.order) {\n        return (b.order || 0) - (a.order || 0);\n      }\n\n      return (b.index || 0) - (a.index || 0);\n    }).map(function (originItem, index) {\n      var _item$dataIndex;\n\n      var title = runFunction(originItem.title, originItem, 'form', /*#__PURE__*/React.createElement(LabelIconTip, {\n        label: originItem.title,\n        tooltip: originItem.tooltip || originItem.tip\n      }));\n      var item = omitUndefined({\n        name: originItem.name,\n        valueType: runFunction(originItem.valueType, {}),\n        key: originItem.key,\n        columns: originItem.columns,\n        fieldProps: runFunction(originItem.fieldProps, refMap.form, originItem),\n        valueEnum: originItem.valueEnum,\n        dataIndex: originItem.key || originItem.dataIndex,\n        initialValue: originItem.initialValue,\n        formItemProps: runFunction(originItem.formItemProps, refMap.form, originItem),\n        width: originItem.width,\n        render: originItem.render,\n        renderFormItem: originItem.renderFormItem,\n        index: originItem.index,\n        readonly: originItem.readonly,\n        transform: originItem.transform,\n        colSize: originItem.colSize,\n        className: originItem.className,\n        renderText: originItem.renderText,\n        request: originItem.request,\n        params: originItem.params,\n        tooltip: originItem.tooltip || originItem.tip,\n        title: title,\n        dependencies: originItem.dependencies,\n        proFieldProps: originItem.proFieldProps\n      }); // 几种特殊的 value 不处理\n\n      if (item.valueType && typeof item.valueType === 'string' && ['index', 'indexBorder', 'option'].includes(item === null || item === void 0 ? void 0 : item.valueType)) {\n        return null;\n      }\n\n      var key = item.key || ((_item$dataIndex = item.dataIndex) === null || _item$dataIndex === void 0 ? void 0 : _item$dataIndex.toString()) || index;\n\n      if (item.valueType === 'group') {\n        if (!item.columns || !Array.isArray(item.columns)) return null;\n        return /*#__PURE__*/React.createElement(ProFormGroup, _extends({\n          key: key,\n          label: title\n        }, item.fieldProps), genItems(item.columns));\n      }\n\n      if (item.valueType === 'formList' && item.dataIndex) {\n        if (!item.columns || !Array.isArray(item.columns)) return null;\n        return /*#__PURE__*/React.createElement(ProFormList, _extends({\n          key: key,\n          name: item.dataIndex,\n          label: item.title,\n          initialValue: item.initialValue\n        }, item.fieldProps), genItems(item.columns));\n      }\n\n      if (item.valueType === 'formSet' && item.dataIndex) {\n        if (!item.columns || !Array.isArray(item.columns)) return null;\n        return /*#__PURE__*/React.createElement(ProFormFieldSet, _extends({}, item.formItemProps, {\n          key: key,\n          initialValue: item.initialValue,\n          name: item.dataIndex,\n          label: item.title\n        }, item.fieldProps), genItems(item.columns, update));\n      }\n      /** 分割线 */\n\n\n      if (item.valueType === 'divider') {\n        return /*#__PURE__*/React.createElement(_Divider, _extends({}, item.fieldProps, {\n          key: index\n        }));\n      }\n      /** ProFormDependency */\n\n\n      if (item.valueType === 'dependency') {\n        return /*#__PURE__*/React.createElement(ProFormDependency, _extends({}, item.fieldProps, {\n          key: key\n        }), function (values) {\n          if (!item.columns || typeof item.columns !== 'function') return null;\n          return genItems(item.columns(values));\n        });\n      }\n      /** 公用的 类型 props */\n\n\n      var formFieldProps = _objectSpread(_objectSpread({\n        label: item.title\n      }, omit(item, ['dataIndex', 'width', 'render', 'renderFormItem', 'renderText', 'title'])), {}, {\n        key: key,\n        name: item.dataIndex,\n        width: item.width,\n        formItemProps: item.formItemProps,\n        fieldProps: item.fieldProps,\n        render: (item === null || item === void 0 ? void 0 : item.render) ? function (dom, entity, renderIndex) {\n          var _item$render;\n\n          return item === null || item === void 0 ? void 0 : (_item$render = item.render) === null || _item$render === void 0 ? void 0 : _item$render.call(item, dom, entity, renderIndex, action === null || action === void 0 ? void 0 : action.current, _objectSpread({\n            type: type\n          }, item));\n        } : undefined\n      });\n\n      var defaultRender = function defaultRender() {\n        return /*#__PURE__*/React.createElement(ProFormField, _extends({}, formFieldProps, {\n          ignoreFormItem: true\n        }));\n      };\n\n      if (item === null || item === void 0 ? void 0 : item.renderFormItem) {\n        var _item$renderFormItem;\n\n        var formDom = item === null || item === void 0 ? void 0 : (_item$renderFormItem = item.renderFormItem) === null || _item$renderFormItem === void 0 ? void 0 : _item$renderFormItem.call(item, _objectSpread(_objectSpread({\n          type: type\n        }, item), {}, {\n          originProps: originItem\n        }), _objectSpread(_objectSpread({}, item), {}, {\n          defaultRender: defaultRender,\n          type: type\n        }), refMap.form);\n\n        if (formDom === false || formDom === undefined || formDom === null) {\n          return null;\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(ProFormField, _extends({}, formFieldProps, {\n        // eslint-disable-next-line react/no-array-index-key\n        key: \"\".concat(key, \"-\").concat(index),\n        transform: item.transform,\n        renderFormItem: (item === null || item === void 0 ? void 0 : item.renderFormItem) ? function (_, config) {\n          var _item$renderFormItem2;\n\n          var renderConfig = omitUndefined(_objectSpread(_objectSpread({}, config), {}, {\n            onChange: undefined\n          }));\n          return item === null || item === void 0 ? void 0 : (_item$renderFormItem2 = item.renderFormItem) === null || _item$renderFormItem2 === void 0 ? void 0 : _item$renderFormItem2.call(item, _objectSpread(_objectSpread({\n            type: type\n          }, item), {}, {\n            originProps: originItem\n          }), _objectSpread(_objectSpread({}, renderConfig), {}, {\n            defaultRender: defaultRender,\n            type: type\n          }), refMap.form);\n        } : undefined\n      }));\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [action, layoutType, type]);\n  var needRealUpdate = useMemo(function () {\n    if (layoutType === 'StepsForm') return [];\n    return columns.some(function (item) {\n      return item.renderFormItem || typeof item.fieldProps === 'function' || typeof item.formItemProps === 'function';\n    });\n  }, [columns, layoutType]);\n\n  var getDomList = function getDomList() {\n    return genItems(columns, updateTime);\n  };\n\n  if (layoutType === 'StepsForm') {\n    return /*#__PURE__*/React.createElement(StepsForm, _extends({\n      formRef: formRef\n    }, rest), steps === null || steps === void 0 ? void 0 : steps.map(function (item, index) {\n      return /*#__PURE__*/React.createElement(BetaSchemaForm, _extends({}, item, {\n        key: index,\n        layoutType: \"StepForm\",\n        columns: columns[index]\n      }));\n    }));\n  }\n  /** 如果是行内模式 */\n\n\n  if (layoutType === 'Embed') return /*#__PURE__*/React.createElement(React.Fragment, null, getDomList());\n  return /*#__PURE__*/React.createElement(Form, _extends({\n    formRef: formRef\n  }, rest, {\n    onInit: function onInit() {\n      var _rest$onInit;\n\n      if (needRealUpdate) {\n        updateFormRender(updateTime + 1);\n      }\n\n      for (var _len = arguments.length, restValue = new Array(_len), _key = 0; _key < _len; _key++) {\n        restValue[_key] = arguments[_key];\n      }\n\n      rest === null || rest === void 0 ? void 0 : (_rest$onInit = rest.onInit) === null || _rest$onInit === void 0 ? void 0 : _rest$onInit.call.apply(_rest$onInit, [rest].concat(restValue));\n    },\n    onValuesChange: function onValuesChange() {\n      var _rest$onValuesChange;\n\n      if (needRealUpdate) {\n        updateFormRender(updateTime + 1);\n      }\n\n      for (var _len2 = arguments.length, restValue = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        restValue[_key2] = arguments[_key2];\n      }\n\n      rest === null || rest === void 0 ? void 0 : (_rest$onValuesChange = rest.onValuesChange) === null || _rest$onValuesChange === void 0 ? void 0 : _rest$onValuesChange.call.apply(_rest$onValuesChange, [rest].concat(restValue));\n    }\n  }), getDomList());\n}\n\nexport default BetaSchemaForm;"]},"metadata":{},"sourceType":"module"}