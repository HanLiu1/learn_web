{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"onFinish\", \"step\", \"formRef\", \"title\", \"stepProps\"];\nimport React, { useContext, useRef, useEffect, useImperativeHandle } from 'react';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport BaseForm from '../../BaseForm';\nimport { StepsFormProvide } from './index';\n\nfunction StepForm(_ref) {\n  var onFinish = _ref.onFinish,\n      step = _ref.step,\n      propFormRef = _ref.formRef,\n      title = _ref.title,\n      stepProps = _ref.stepProps,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var formRef = useRef();\n  var context = useContext(StepsFormProvide); // eslint-disable-next-line @typescript-eslint/dot-notation\n\n  noteOnce(!restProps['submitter'], 'StepForm 不包含提交按钮，请在 StepsForm 上');\n  /** 重置 formRef */\n\n  useImperativeHandle(propFormRef, function () {\n    return formRef.current;\n  });\n  /** Dom 不存在的时候解除挂载 */\n\n  useEffect(function () {\n    return function () {\n      if (restProps.name) {\n        context === null || context === void 0 ? void 0 : context.unRegForm(restProps.name);\n      }\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (context && (context === null || context === void 0 ? void 0 : context.formArrayRef)) {\n    context.formArrayRef.current[step || 0] = formRef;\n  }\n\n  return /*#__PURE__*/React.createElement(BaseForm, _extends({\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (restProps.name) {\n                  context === null || context === void 0 ? void 0 : context.onFormFinish(restProps.name, values);\n                }\n\n                if (!onFinish) {\n                  _context.next = 9;\n                  break;\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(true); // 如果报错，直接抛出\n\n                _context.next = 5;\n                return onFinish === null || onFinish === void 0 ? void 0 : onFinish(values);\n\n              case 5:\n                success = _context.sent;\n\n                if (success) {\n                  context === null || context === void 0 ? void 0 : context.next();\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(false);\n                return _context.abrupt(\"return\");\n\n              case 9:\n                context === null || context === void 0 ? void 0 : context.next();\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    layout: \"vertical\"\n  }, restProps));\n}\n\nexport default StepForm;","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/layouts/StepsForm/StepForm.js"],"names":["_extends","_regeneratorRuntime","_asyncToGenerator","_objectWithoutProperties","_excluded","React","useContext","useRef","useEffect","useImperativeHandle","noteOnce","BaseForm","StepsFormProvide","StepForm","_ref","onFinish","step","propFormRef","formRef","title","stepProps","restProps","context","current","name","unRegForm","formArrayRef","createElement","_ref2","mark","_callee","values","success","wrap","_callee$","_context","prev","next","onFormFinish","setLoading","sent","abrupt","stop","_x","apply","arguments","layout"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"onFinish\", \"step\", \"formRef\", \"title\", \"stepProps\"];\nimport React, { useContext, useRef, useEffect, useImperativeHandle } from 'react';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport BaseForm from '../../BaseForm';\nimport { StepsFormProvide } from './index';\n\nfunction StepForm(_ref) {\n  var onFinish = _ref.onFinish,\n      step = _ref.step,\n      propFormRef = _ref.formRef,\n      title = _ref.title,\n      stepProps = _ref.stepProps,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var formRef = useRef();\n  var context = useContext(StepsFormProvide); // eslint-disable-next-line @typescript-eslint/dot-notation\n\n  noteOnce(!restProps['submitter'], 'StepForm 不包含提交按钮，请在 StepsForm 上');\n  /** 重置 formRef */\n\n  useImperativeHandle(propFormRef, function () {\n    return formRef.current;\n  });\n  /** Dom 不存在的时候解除挂载 */\n\n  useEffect(function () {\n    return function () {\n      if (restProps.name) {\n        context === null || context === void 0 ? void 0 : context.unRegForm(restProps.name);\n      }\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (context && (context === null || context === void 0 ? void 0 : context.formArrayRef)) {\n    context.formArrayRef.current[step || 0] = formRef;\n  }\n\n  return /*#__PURE__*/React.createElement(BaseForm, _extends({\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (restProps.name) {\n                  context === null || context === void 0 ? void 0 : context.onFormFinish(restProps.name, values);\n                }\n\n                if (!onFinish) {\n                  _context.next = 9;\n                  break;\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(true); // 如果报错，直接抛出\n\n                _context.next = 5;\n                return onFinish === null || onFinish === void 0 ? void 0 : onFinish(values);\n\n              case 5:\n                success = _context.sent;\n\n                if (success) {\n                  context === null || context === void 0 ? void 0 : context.next();\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(false);\n                return _context.abrupt(\"return\");\n\n              case 9:\n                context === null || context === void 0 ? void 0 : context.next();\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    layout: \"vertical\"\n  }, restProps));\n}\n\nexport default StepForm;"]},"metadata":{},"sourceType":"module"}