{"ast":null,"code":"import \"antd/es/upload/style\";\nimport _Upload from \"antd/es/upload\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { UploadOutlined } from '@ant-design/icons';\nimport createField from '../../BaseForm/createField';\n/**\n * 上传按钮组件\n *\n * @param\n */\n\nvar ProFormUploadButton = function ProFormUploadButton(_ref, ref) {\n  var fieldProps = _ref.fieldProps,\n      name = _ref.name,\n      action = _ref.action,\n      accept = _ref.accept,\n      listType = _ref.listType,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? '单击上传' : _ref$title,\n      max = _ref.max,\n      _ref$icon = _ref.icon,\n      icon = _ref$icon === void 0 ? /*#__PURE__*/React.createElement(UploadOutlined, null) : _ref$icon,\n      value = _ref.value,\n      buttonProps = _ref.buttonProps,\n      _onChange = _ref.onChange,\n      disabled = _ref.disabled,\n      proFieldProps = _ref.proFieldProps,\n      fileList = _ref.fileList; // 如果配置了 max ，并且 超过了文件列表的大小，就不展示按钮\n\n  var showUploadButton = (max === undefined || !value || (value === null || value === void 0 ? void 0 : value.length) < max) && (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.mode) !== 'read';\n  var isPictureCard = (listType !== null && listType !== void 0 ? listType : fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.listType) === 'picture-card';\n  return /*#__PURE__*/React.createElement(_Upload, _extends({\n    action: action,\n    accept: accept,\n    ref: ref // 'fileList' 改成和 ant.design 文档中 Update 组件 默认 file字段一样\n    ,\n    name: name || 'file',\n    listType: listType || 'picture',\n    fileList: fileList !== null && fileList !== void 0 ? fileList : value\n  }, fieldProps, {\n    onChange: function onChange(info) {\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(info);\n\n      if (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.onChange) {\n        fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.onChange(info);\n      }\n    }\n  }), showUploadButton && (isPictureCard ? /*#__PURE__*/React.createElement(\"span\", null, icon, \" \", title) : /*#__PURE__*/React.createElement(_Button, _extends({\n    disabled: disabled || (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.disabled)\n  }, buttonProps), icon, title)));\n};\n\nexport default createField( /*#__PURE__*/React.forwardRef(ProFormUploadButton), {\n  getValueFromEvent: function getValueFromEvent(value) {\n    return value.fileList;\n  }\n});","map":{"version":3,"sources":["C:/web/my-app/node_modules/@ant-design/pro-form/es/components/UploadButton/index.js"],"names":["_Upload","_Button","_extends","React","UploadOutlined","createField","ProFormUploadButton","_ref","ref","fieldProps","name","action","accept","listType","_ref$title","title","max","_ref$icon","icon","createElement","value","buttonProps","_onChange","onChange","disabled","proFieldProps","fileList","showUploadButton","undefined","length","mode","isPictureCard","info","forwardRef","getValueFromEvent"],"mappings":"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","sourcesContent":["import \"antd/es/upload/style\";\nimport _Upload from \"antd/es/upload\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { UploadOutlined } from '@ant-design/icons';\nimport createField from '../../BaseForm/createField';\n/**\n * 上传按钮组件\n *\n * @param\n */\n\nvar ProFormUploadButton = function ProFormUploadButton(_ref, ref) {\n  var fieldProps = _ref.fieldProps,\n      name = _ref.name,\n      action = _ref.action,\n      accept = _ref.accept,\n      listType = _ref.listType,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? '单击上传' : _ref$title,\n      max = _ref.max,\n      _ref$icon = _ref.icon,\n      icon = _ref$icon === void 0 ? /*#__PURE__*/React.createElement(UploadOutlined, null) : _ref$icon,\n      value = _ref.value,\n      buttonProps = _ref.buttonProps,\n      _onChange = _ref.onChange,\n      disabled = _ref.disabled,\n      proFieldProps = _ref.proFieldProps,\n      fileList = _ref.fileList;\n  // 如果配置了 max ，并且 超过了文件列表的大小，就不展示按钮\n  var showUploadButton = (max === undefined || !value || (value === null || value === void 0 ? void 0 : value.length) < max) && (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.mode) !== 'read';\n  var isPictureCard = (listType !== null && listType !== void 0 ? listType : fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.listType) === 'picture-card';\n  return /*#__PURE__*/React.createElement(_Upload, _extends({\n    action: action,\n    accept: accept,\n    ref: ref // 'fileList' 改成和 ant.design 文档中 Update 组件 默认 file字段一样\n    ,\n    name: name || 'file',\n    listType: listType || 'picture',\n    fileList: fileList !== null && fileList !== void 0 ? fileList : value\n  }, fieldProps, {\n    onChange: function onChange(info) {\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(info);\n\n      if (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.onChange) {\n        fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.onChange(info);\n      }\n    }\n  }), showUploadButton && (isPictureCard ? /*#__PURE__*/React.createElement(\"span\", null, icon, \" \", title) : /*#__PURE__*/React.createElement(_Button, _extends({\n    disabled: disabled || (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.disabled)\n  }, buttonProps), icon, title)));\n};\n\nexport default createField( /*#__PURE__*/React.forwardRef(ProFormUploadButton), {\n  getValueFromEvent: function getValueFromEvent(value) {\n    return value.fileList;\n  }\n});"]},"metadata":{},"sourceType":"module"}